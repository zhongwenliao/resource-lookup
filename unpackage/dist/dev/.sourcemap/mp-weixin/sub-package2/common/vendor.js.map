{"version":3,"sources":["uni-app:///sub-package2/components/feng-parse/libs/html2json.js","uni-app:///sub-package2/components/feng-parse/libs/wxDiscode.js","uni-app:///sub-package2/components/feng-parse/libs/htmlparser.js","uni-app:///uni_modules/Sansnn-uQRCode/js_sdk/u-qrcode/u-qrcode.js","webpack:///./node_modules/@babel/runtime/helpers/toArray.js?480f"],"names":["makeMap","str","obj","items","split","i","length","block","inline","closeSelf","removeDOCTYPE","html","isDocument","test","RegExp","$1","trimHtml","replace","getScreenInfo","screen","wx","getSystemInfo","success","res","width","windowWidth","height","windowHeight","html2json","customHandler","imageProp","host","wxDiscode","strDiscode","bufArray","results","nodes","imageUrls","Node","tag","this","node","$screen","HTMLParser","start","attrs","unary","parent","undefined","tagType","attr","reduce","pre","name","value","classStr","styleStr","match","Array","isArray","push","imgUrl","src","urlToHttpUrl","domain","Object","assign","href","fontSize","styleAttrs","color","face","size","keys","forEach","key","source","unshift","end","shift","console","error","chars","text","trim","strNumDiscode","strGreeceDiscode","strcharacterDiscode","strOtherDiscode","url","startTag","endTag","empty","fillAttrs","handler","index","last","stack","parseEndTag","tagName","pos","toLowerCase","parseStartTag","rest","matches","arguments","escaped","indexOf","substring","Error","uQRCode","options","canvasContext","loadImage","getOptions","getCanvasContext","getLoadImage","QR8bitByte","data","mode","QRMode","MODE_8BIT_BYTE","QRCode","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","prototype","getLength","buffer","write","put","charCodeAt","addData","newData","isDark","row","col","getModuleCount","make","rsBlocks","QRRSBlock","getRSBlocks","QRBitBuffer","totalDataCount","dataCount","QRUtil","getLengthInBits","makeImpl","getBestMaskPattern","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","minLostPoint","pattern","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","cs","y","x","dark","beginFill","moveTo","lineTo","endFill","getPatternPosition","j","bits","getBCHTypeNumber","mod","Math","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","mask","getMask","PAD0","PAD1","putBit","createBytes","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","rsPoly","getErrorCorrectPolynomial","rawPoly","QRPolynomial","modPoly","modIndex","get","totalCodeCount","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","QRErrorCorrectLevel","L","M","Q","H","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","d","getBCHDigit","digit","errorCorrectLength","a","multiply","QRMath","gexp","type","qrCode","sameCount","count","darkCount","ratio","abs","glog","n","LOG_TABLE","EXP_TABLE","num","utf16To8","result","charAt","String","fromCharCode","e","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","Queue","waitingQueue","isRunning","execute","task","resolve","reject","then","catch","finally","next","Promise","defaults","useDynamicSize","margin","background","foreground","deepReplace","o","k","vr","constructor","image","align","anchor","alpha","positionDetection","backgroundColor","foregroundColor","separator","alignment","timing","darkBlock","versionInformation","ctx","setFillStyle","fillStyle","setFontSize","font","setTextAlign","textAlign","setTextBaseline","textBaseline","draw","reserve","callback","QueueLoadImage","loadImageCache","setTimeout","cache","find","img","makeData","getMakeData","qrcode","toString","JSON","parse","stringify","paintData","paintPositionDetection","paintSeparator","paintAlignment","paintTiming","paintDarkBlock","paintVersionInformation","dynamicSize","ceil","tileSize","rowI","colI","tile","isBlack","isDrawn","basePart","disc","ltItem","rtItem","lbItem","ALIGNMENT_OF_VERSION","alignments","calcMatrix","group_len","alignmentItem","timingPartLen","xItem","yItem","darkBlockItem","version","VERSIONS","version_codes","version_cells","versionInformationItem","drawBackground","before","after","drawBackgroundImage","drawForeground","drawForegroundImage","startup","queueResolve","queueReject","save","fillRect","restore","w","h","Number","globalAlpha","drawImage","shadow","border","arrayWithHoles","require","iterableToArray","unsupportedIterableToArray","nonIterableRest","_toArray","arr","module","exports","__esModule"],"mappings":"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","file":"sub-package2/common/vendor.js","sourcesContent":["/**\r\n * html2Json 改造来自: https://github.com/Jxck/html2json\r\n *\r\n *\r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n *\r\n * github地址: https://github.com/icindy/wxParse\r\n *\r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n\r\nimport wxDiscode from './wxDiscode';\r\nimport HTMLParser from './htmlparser';\r\n\r\nfunction makeMap(str) {\r\n\tconst obj = {};\r\n\tconst items = str.split(',');\r\n\tfor (let i = 0; i < items.length; i += 1) obj[items[i]] = true;\r\n\treturn obj;\r\n}\r\n\r\n// Block Elements - HTML 5\r\nconst block = makeMap(\r\n\t'br,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video'\r\n);\r\n\r\n// Inline Elements - HTML 5\r\nconst inline = makeMap(\r\n\t'a,abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var'\r\n);\r\n\r\n// Elements that you can, intentionally, leave open\r\n// (and which close themselves)\r\nconst closeSelf = makeMap('colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr');\r\n\r\nfunction removeDOCTYPE(html) {\r\n\tconst isDocument = /<body.*>([^]*)<\\/body>/.test(html);\r\n\treturn isDocument ? RegExp.$1 : html;\r\n}\r\n\r\nfunction trimHtml(html) {\r\n\treturn html\r\n\t\t.replace(/<!--.*?-->/gi, '')\r\n\t\t.replace(/\\/\\*.*?\\*\\//gi, '')\r\n\t\t// .replace(/[ ]+</gi, '<')\r\n\t\t.replace(/<script[^]*<\\/script>/gi, '')\r\n\t\t.replace(/<style[^]*<\\/style>/gi, '');\r\n}\r\n\r\nfunction getScreenInfo() {\r\n\tconst screen = {};\r\n\twx.getSystemInfo({\r\n\t\tsuccess: (res) => {\r\n\t\t\tscreen.width = res.windowWidth;\r\n\t\t\tscreen.height = res.windowHeight;\r\n\t\t},\r\n\t});\r\n\treturn screen;\r\n}\r\n\r\nfunction html2json(html, customHandler, imageProp, host) {\r\n\t// 处理字符串\r\n\thtml = removeDOCTYPE(html);\r\n\thtml = trimHtml(html);\r\n\thtml = wxDiscode.strDiscode(html);\r\n\t// 生成node节点\r\n\tconst bufArray = [];\r\n\tconst results = {\r\n\t\tnodes: [],\r\n\t\timageUrls: [],\r\n\t};\r\n\r\n\tconst screen = getScreenInfo();\r\n\r\n\tfunction Node(tag) {\r\n\t\tthis.node = 'element';\r\n\t\tthis.tag = tag;\r\n\r\n\t\tthis.$screen = screen;\r\n\t}\r\n\r\n\tHTMLParser(html, {\r\n\t\tstart(tag, attrs, unary) {\r\n\t\t\t// node for this element\r\n\t\t\tconst node = new Node(tag);\r\n\r\n\t\t\tif (bufArray.length !== 0) {\r\n\t\t\t\tconst parent = bufArray[0];\r\n\t\t\t\tif (parent.nodes === undefined) {\r\n\t\t\t\t\tparent.nodes = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (block[tag]) {\r\n\t\t\t\tnode.tagType = 'block';\r\n\t\t\t} else if (inline[tag]) {\r\n\t\t\t\tnode.tagType = 'inline';\r\n\t\t\t} else if (closeSelf[tag]) {\r\n\t\t\t\tnode.tagType = 'closeSelf';\r\n\t\t\t}\r\n\r\n\t\t\tnode.attr = attrs.reduce((pre, attr) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tname\r\n\t\t\t\t} = attr;\r\n\t\t\t\tlet {\r\n\t\t\t\t\tvalue\r\n\t\t\t\t} = attr;\r\n\t\t\t\tif (name === 'class') {\r\n\t\t\t\t\tnode.classStr = value;\r\n\t\t\t\t}\r\n\t\t\t\t// has multi attibutes\r\n\t\t\t\t// make it array of attribute\r\n\t\t\t\tif (name === 'style') {\r\n\t\t\t\t\tnode.styleStr = value;\r\n\t\t\t\t}\r\n\t\t\t\tif (value.match(/ /)) {\r\n\t\t\t\t\tvalue = value.split(' ');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if attr already exists\r\n\t\t\t\t// merge it\r\n\t\t\t\tif (pre[name]) {\r\n\t\t\t\t\tif (Array.isArray(pre[name])) {\r\n\t\t\t\t\t\t// already array, push to last\r\n\t\t\t\t\t\tpre[name].push(value);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// single value, make it array\r\n\t\t\t\t\t\tpre[name] = [pre[name], value];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// not exist, put it\r\n\t\t\t\t\tpre[name] = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn pre;\r\n\t\t\t}, {});\r\n\r\n\t\t\t// 优化样式相关属性\r\n\t\t\tif (node.classStr) {\r\n\t\t\t\tnode.classStr += ` ${node.tag}`;\r\n\t\t\t} else {\r\n\t\t\t\tnode.classStr = node.tag;\r\n\t\t\t}\r\n\t\t\tif (node.tagType === 'inline') {\r\n\t\t\t\tnode.classStr += ' inline';\r\n\t\t\t}\r\n\r\n\t\t\t// 对img添加额外数据\r\n\t\t\tif (node.tag === 'img') {\r\n\t\t\t\tlet imgUrl = node.attr.src;\r\n\t\t\t\timgUrl = wxDiscode.urlToHttpUrl(imgUrl, imageProp.domain);\r\n\t\t\t\tObject.assign(node.attr, imageProp, {\r\n\t\t\t\t\tsrc: imgUrl || '',\r\n\t\t\t\t});\r\n\t\t\t\tif (imgUrl) {\r\n\t\t\t\t\tresults.imageUrls.push(imgUrl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 处理a标签属性\r\n\t\t\tif (node.tag === 'a') {\r\n\t\t\t\tnode.attr.href = node.attr.href || '';\r\n\t\t\t}\r\n\r\n\t\t\t//处理table\r\n\t\t\tif (node.tag === 'table' || node.tag === 'tr' || node.tag === 'td') {\r\n\t\t\t\tnode.styleStr = \"\"\r\n\t\t\t\tif (node.attr.width) {\r\n\t\t\t\t\tnode.styleStr += \"width:\" + node.attr.width + 'px;'\r\n\t\t\t\t\tif (node.attr.width > node.$screen.width) {\r\n\t\t\t\t\t\t//等比缩放height\r\n\t\t\t\t\t\tif (node.attr.height) {\r\n\t\t\t\t\t\t\tnode.attr.height = (node.$screen.width * node.attr.height) / node.attr.width\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (node.attr.height) {\r\n\t\t\t\t\tnode.styleStr += \"height:\" + node.attr.height + 'px;'\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t//处理video\r\n\t\t\tif (node.tag === 'video') {\r\n\t\t\t\tnode.styleStr = \"\"\r\n\t\t\t\tif (node.attr.width) {\r\n\t\t\t\t\tnode.styleStr += \"width:\" + node.attr.width + 'px;'\r\n\t\t\t\t\tif (node.attr.width > node.$screen.width) {\r\n\t\t\t\t\t\t//等比缩放height\r\n\t\t\t\t\t\tif (node.attr.height) {\r\n\t\t\t\t\t\t\tnode.attr.height = (node.$screen.width * node.attr.height) / node.attr.width\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (node.attr.height) {\r\n\t\t\t\t\tnode.styleStr += \"height:\" + node.attr.height + 'px;'\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// 处理font标签样式属性\r\n\t\t\tif (node.tag === 'font') {\r\n\t\t\t\tconst fontSize = [\r\n\t\t\t\t\t'x-small',\r\n\t\t\t\t\t'small',\r\n\t\t\t\t\t'medium',\r\n\t\t\t\t\t'large',\r\n\t\t\t\t\t'x-large',\r\n\t\t\t\t\t'xx-large',\r\n\t\t\t\t\t'-webkit-xxx-large',\r\n\t\t\t\t];\r\n\t\t\t\tconst styleAttrs = {\r\n\t\t\t\t\tcolor: 'color',\r\n\t\t\t\t\tface: 'font-family',\r\n\t\t\t\t\tsize: 'font-size',\r\n\t\t\t\t};\r\n\t\t\t\tif (!node.styleStr) node.styleStr = '';\r\n\t\t\t\tObject.keys(styleAttrs).forEach((key) => {\r\n\t\t\t\t\tif (node.attr[key]) {\r\n\t\t\t\t\t\tconst value = key === 'size' ? fontSize[node.attr[key] - 1] : node.attr[key];\r\n\t\t\t\t\t\tnode.styleStr += `${styleAttrs[key]}: ${value};`;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// 临时记录source资源\r\n\t\t\tif (node.tag === 'source') {\r\n\t\t\t\tresults.source = node.attr.src;\r\n\t\t\t}\r\n\r\n\t\t\tif (customHandler.start) {\r\n\t\t\t\tcustomHandler.start(node, results);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (unary) {\r\n\t\t\t\t// if this tag doesn't have end tag\r\n\t\t\t\t// like <img src=\"hoge.png\"/>\r\n\t\t\t\t// add to parents\r\n\t\t\t\tconst parent = bufArray[0] || results;\r\n\t\t\t\tif (parent.nodes === undefined) {\r\n\t\t\t\t\tparent.nodes = [];\r\n\t\t\t\t}\r\n\t\t\t\tparent.nodes.push(node);\r\n\t\t\t} else {\r\n\t\t\t\tbufArray.unshift(node);\r\n\t\t\t}\r\n\t\t},\r\n\t\tend(tag) {\r\n\t\t\t// merge into parent tag\r\n\t\t\tconst node = bufArray.shift();\r\n\t\t\tif (node.tag !== tag) {\r\n\t\t\t\tconsole.error('invalid state: mismatch end tag');\r\n\t\t\t}\r\n\r\n\t\t\t// 当有缓存source资源时于于video补上src资源\r\n\t\t\tif (node.tag === 'video' && results.source) {\r\n\t\t\t\tnode.attr.src = results.source;\r\n\t\t\t\tdelete results.source;\r\n\t\t\t}\r\n\r\n\t\t\tif (customHandler && customHandler.end) {\r\n\t\t\t\tcustomHandler.end(node, results);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (bufArray.length === 0) {\r\n\t\t\t\tresults.nodes.push(node);\r\n\t\t\t} else {\r\n\t\t\t\tconst parent = bufArray[0];\r\n\t\t\t\tif (!parent.nodes) {\r\n\t\t\t\t\tparent.nodes = [];\r\n\t\t\t\t}\r\n\t\t\t\tparent.nodes.push(node);\r\n\t\t\t}\r\n\t\t},\r\n\t\tchars(text) {\r\n\t\t\tif (!text.trim()) return;\r\n\r\n\t\t\tconst node = {\r\n\t\t\t\tnode: 'text',\r\n\t\t\t\ttext,\r\n\t\t\t};\r\n\r\n\t\t\tif (customHandler.chars) {\r\n\t\t\t\tcustomHandler.chars(node, results);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (bufArray.length === 0) {\r\n\t\t\t\tresults.nodes.push(node);\r\n\t\t\t} else {\r\n\t\t\t\tconst parent = bufArray[0];\r\n\t\t\t\tif (parent.nodes === undefined) {\r\n\t\t\t\t\tparent.nodes = [];\r\n\t\t\t\t}\r\n\t\t\t\tparent.nodes.push(node);\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\r\n\treturn results;\r\n}\r\n\r\nexport default html2json;\r\n","// HTML 支持的数学符号\r\nfunction strNumDiscode(str) {\r\nstr = str.replace(/&forall;|&#8704;|&#x2200;/g, '∀');\r\nstr = str.replace(/&part;|&#8706;|&#x2202;/g, '∂');\r\nstr = str.replace(/&exist;|&#8707;|&#x2203;/g, '∃');\r\nstr = str.replace(/&empty;|&#8709;|&#x2205;/g, '∅');\r\nstr = str.replace(/&nabla;|&#8711;|&#x2207;/g, '∇');\r\nstr = str.replace(/&isin;|&#8712;|&#x2208;/g, '∈');\r\nstr = str.replace(/&notin;|&#8713;|&#x2209;/g, '∉');\r\nstr = str.replace(/&ni;|&#8715;|&#x220b;/g, '∋');\r\nstr = str.replace(/&prod;|&#8719;|&#x220f;/g, '∏');\r\nstr = str.replace(/&sum;|&#8721;|&#x2211;/g, '∑');\r\nstr = str.replace(/&minus;|&#8722;|&#x2212;/g, '−');\r\nstr = str.replace(/&lowast;|&#8727;|&#x2217;/g, '∗');\r\nstr = str.replace(/&radic;|&#8730;|&#x221a;/g, '√');\r\nstr = str.replace(/&prop;|&#8733;|&#x221d;/g, '∝');\r\nstr = str.replace(/&infin;|&#8734;|&#x221e;/g, '∞');\r\nstr = str.replace(/&ang;|&#8736;|&#x2220;/g, '∠');\r\nstr = str.replace(/&and;|&#8743;|&#x2227;/g, '∧');\r\nstr = str.replace(/&or;|&#8744;|&#x2228;/g, '∨');\r\nstr = str.replace(/&cap;|&#8745;|&#x2229;/g, '∩');\r\nstr = str.replace(/&cup;|&#8746;|&#x222a;/g, '∪');\r\nstr = str.replace(/&int;|&#8747;|&#x222b;/g, '∫');\r\nstr = str.replace(/&there4;|&#8756;|&#x2234;/g, '∴');\r\nstr = str.replace(/&sim;|&#8764;|&#x223c;/g, '∼');\r\nstr = str.replace(/&cong;|&#8773;|&#x2245;/g, '≅');\r\nstr = str.replace(/&asymp;|&#8776;|&#x2248;/g, '≈');\r\nstr = str.replace(/&ne;|&#8800;|&#x2260;/g, '≠');\r\nstr = str.replace(/&le;|&#8804;|&#x2264;/g, '≤');\r\nstr = str.replace(/&ge;|&#8805;|&#x2265;/g, '≥');\r\nstr = str.replace(/&sub;|&#8834;|&#x2282;/g, '⊂');\r\nstr = str.replace(/&sup;|&#8835;|&#x2283;/g, '⊃');\r\nstr = str.replace(/&nsub;|&#8836;|&#x2284;/g, '⊄');\r\nstr = str.replace(/&sube;|&#8838;|&#x2286;/g, '⊆');\r\nstr = str.replace(/&supe;|&#8839;|&#x2287;/g, '⊇');\r\nstr = str.replace(/&oplus;|&#8853;|&#x2295;/g, '⊕');\r\nstr = str.replace(/&otimes;|&#8855;|&#x2297;/g, '⊗');\r\nstr = str.replace(/&perp;|&#8869;|&#x22a5;/g, '⊥');\r\nstr = str.replace(/&sdot;|&#8901;|&#x22c5;/g, '⋅');\r\nreturn str;\r\n}\r\n\r\n// HTML 支持的希腊字母\r\nfunction strGreeceDiscode(str) {\r\nstr = str.replace(/&Alpha;|&#913;|&#x391;/g, 'Α');\r\nstr = str.replace(/&Beta;|&#914;|&#x392;/g, 'Β');\r\nstr = str.replace(/&Gamma;|&#915;|&#x393;/g, 'Γ');\r\nstr = str.replace(/&Delta;|&#916;|&#x394;/g, 'Δ');\r\nstr = str.replace(/&Epsilon;|&#917;|&#x395;/g, 'Ε');\r\nstr = str.replace(/&Zeta;|&#918;|&#x396;/g, 'Ζ');\r\nstr = str.replace(/&Eta;|&#919;|&#x397;/g, 'Η');\r\nstr = str.replace(/&Theta;|&#920;|&#x398;/g, 'Θ');\r\nstr = str.replace(/&Iota;|&#921;|&#x399;/g, 'Ι');\r\nstr = str.replace(/&Kappa;|&#922;|&#x39a;/g, 'Κ');\r\nstr = str.replace(/&Lambda;|&#923;|&#x39b;/g, 'Λ');\r\nstr = str.replace(/&Mu;|&#924;|&#x39c;/g, 'Μ');\r\nstr = str.replace(/&Nu;|&#925;|&#x39d;/g, 'Ν');\r\nstr = str.replace(/&Xi;|&#925;|&#x39d;/g, 'Ν');\r\nstr = str.replace(/&Omicron;|&#927;|&#x39f;/g, 'Ο');\r\nstr = str.replace(/&Pi;|&#928;|&#x3a0;/g, 'Π');\r\nstr = str.replace(/&Rho;|&#929;|&#x3a1;/g, 'Ρ');\r\nstr = str.replace(/&Sigma;|&#931;|&#x3a3;/g, 'Σ');\r\nstr = str.replace(/&Tau;|&#932;|&#x3a4;/g, 'Τ');\r\nstr = str.replace(/&Upsilon;|&#933;|&#x3a5;/g, 'Υ');\r\nstr = str.replace(/&Phi;|&#934;|&#x3a6;/g, 'Φ');\r\nstr = str.replace(/&Chi;|&#935;|&#x3a7;/g, 'Χ');\r\nstr = str.replace(/&Psi;|&#936;|&#x3a8;/g, 'Ψ');\r\nstr = str.replace(/&Omega;|&#937;|&#x3a9;/g, 'Ω');\r\n\r\nstr = str.replace(/&alpha;|&#945;|&#x3b1;/g, 'α');\r\nstr = str.replace(/&beta;|&#946;|&#x3b2;/g, 'β');\r\nstr = str.replace(/&gamma;|&#947;|&#x3b3;/g, 'γ');\r\nstr = str.replace(/&delta;|&#948;|&#x3b4;/g, 'δ');\r\nstr = str.replace(/&epsilon;|&#949;|&#x3b5;/g, 'ε');\r\nstr = str.replace(/&zeta;|&#950;|&#x3b6;/g, 'ζ');\r\nstr = str.replace(/&eta;|&#951;|&#x3b7;/g, 'η');\r\nstr = str.replace(/&theta;|&#952;|&#x3b8;/g, 'θ');\r\nstr = str.replace(/&iota;|&#953;|&#x3b9;/g, 'ι');\r\nstr = str.replace(/&kappa;|&#954;|&#x3ba;/g, 'κ');\r\nstr = str.replace(/&lambda;|&#955;|&#x3bb;/g, 'λ');\r\nstr = str.replace(/&mu;|&#956;|&#x3bc;/g, 'μ');\r\nstr = str.replace(/&nu;|&#957;|&#x3bd;/g, 'ν');\r\nstr = str.replace(/&xi;|&#958;|&#x3be;/g, 'ξ');\r\nstr = str.replace(/&omicron;|&#959;|&#x3bf;/g, 'ο');\r\nstr = str.replace(/&pi;|&#960;|&#x3c0;/g, 'π');\r\nstr = str.replace(/&rho;|&#961;|&#x3c1;/g, 'ρ');\r\nstr = str.replace(/&sigmaf;|&#962;|&#x3c2;/g, 'ς');\r\nstr = str.replace(/&sigma;|&#963;|&#x3c3;/g, 'σ');\r\nstr = str.replace(/&tau;|&#964;|&#x3c4;/g, 'τ');\r\nstr = str.replace(/&upsilon;|&#965;|&#x3c5;/g, 'υ');\r\nstr = str.replace(/&phi;|&#966;|&#x3c6;/g, 'φ');\r\nstr = str.replace(/&chi;|&#967;|&#x3c7;/g, 'χ');\r\nstr = str.replace(/&psi;|&#968;|&#x3c8;/g, 'ψ');\r\nstr = str.replace(/&omega;|&#969;|&#x3c9;/g, 'ω');\r\nstr = str.replace(/&thetasym;|&#977;|&#x3d1;/g, 'ϑ');\r\nstr = str.replace(/&upsih;|&#978;|&#x3d2;/g, 'ϒ');\r\nstr = str.replace(/&piv;|&#982;|&#x3d6;/g, 'ϖ');\r\nstr = str.replace(/&middot;|&#183;|&#xb7;/g, '·');\r\nreturn str;\r\n}\r\n\r\nfunction strcharacterDiscode(str) {\r\n// 加入常用解析\r\n\r\nstr = str.replace(/&nbsp;|&#32;|&#x20;/g, \"&nbsp;\");\r\nstr = str.replace(/&ensp;|&#8194;|&#x2002;/g, '&ensp;');\r\nstr = str.replace(/&#12288;|&#x3000;/g, '<span class=\\'spaceshow\\'>　</span>');\r\nstr = str.replace(/&emsp;|&#8195;|&#x2003;/g, '&emsp;');\r\nstr = str.replace(/&quot;|&#34;|&#x22;/g, \"\\\"\");\r\nstr = str.replace(/&apos;|&#39;|&#x27;/g, \"&apos;\");\r\nstr = str.replace(/&acute;|&#180;|&#xB4;/g, \"´\");\r\nstr = str.replace(/&times;|&#215;|&#xD7;/g, \"×\");\r\nstr = str.replace(/&divide;|&#247;|&#xF7;/g, \"÷\");\r\nstr = str.replace(/&amp;|&#38;|&#x26;/g, '&amp;');\r\nstr = str.replace(/&lt;|&#60;|&#x3c;/g, '&lt;');\r\nstr = str.replace(/&gt;|&#62;|&#x3e;/g, '&gt;');\r\n\r\n\r\n\r\n\r\nstr = str.replace(/&nbsp;|&#32;|&#x20;/g, \"<span class='spaceshow'> </span>\");\r\nstr = str.replace(/&ensp;|&#8194;|&#x2002;/g, '<span class=\\'spaceshow\\'> </span>');\r\nstr = str.replace(/&#12288;|&#x3000;/g, '<span class=\\'spaceshow\\'>　</span>');\r\nstr = str.replace(/&emsp;|&#8195;|&#x2003;/g, '<span class=\\'spaceshow\\'> </span>');\r\nstr = str.replace(/&quot;|&#34;|&#x22;/g, \"\\\"\");\r\nstr = str.replace(/&quot;|&#39;|&#x27;/g, \"'\");\r\nstr = str.replace(/&acute;|&#180;|&#xB4;/g, \"´\");\r\nstr = str.replace(/&times;|&#215;|&#xD7;/g, \"×\");\r\nstr = str.replace(/&divide;|&#247;|&#xF7;/g, \"÷\");\r\nstr = str.replace(/&amp;|&#38;|&#x26;/g, '&');\r\nstr = str.replace(/&lt;|&#60;|&#x3c;/g, '<');\r\nstr = str.replace(/&gt;|&#62;|&#x3e;/g, '>');\r\nreturn str;\r\n}\r\n\r\n// HTML 支持的其他实体\r\nfunction strOtherDiscode(str) {\r\nstr = str.replace(/&OElig;|&#338;|&#x152;/g, 'Œ');\r\nstr = str.replace(/&oelig;|&#339;|&#x153;/g, 'œ');\r\nstr = str.replace(/&Scaron;|&#352;|&#x160;/g, 'Š');\r\nstr = str.replace(/&scaron;|&#353;|&#x161;/g, 'š');\r\nstr = str.replace(/&Yuml;|&#376;|&#x178;/g, 'Ÿ');\r\nstr = str.replace(/&fnof;|&#402;|&#x192;/g, 'ƒ');\r\nstr = str.replace(/&circ;|&#710;|&#x2c6;/g, 'ˆ');\r\nstr = str.replace(/&tilde;|&#732;|&#x2dc;/g, '˜');\r\nstr = str.replace(/&thinsp;|$#8201;|&#x2009;/g, '<span class=\\'spaceshow\\'> </span>');\r\nstr = str.replace(/&zwnj;|&#8204;|&#x200C;/g, '<span class=\\'spaceshow\\'>‌</span>');\r\nstr = str.replace(/&zwj;|$#8205;|&#x200D;/g, '<span class=\\'spaceshow\\'>‍</span>');\r\nstr = str.replace(/&lrm;|$#8206;|&#x200E;/g, '<span class=\\'spaceshow\\'>‎</span>');\r\nstr = str.replace(/&rlm;|&#8207;|&#x200F;/g, '<span class=\\'spaceshow\\'>‏</span>');\r\nstr = str.replace(/&ndash;|&#8211;|&#x2013;/g, '–');\r\nstr = str.replace(/&mdash;|&#8212;|&#x2014;/g, '—');\r\nstr = str.replace(/&lsquo;|&#8216;|&#x2018;/g, '‘');\r\nstr = str.replace(/&rsquo;|&#8217;|&#x2019;/g, '’');\r\nstr = str.replace(/&sbquo;|&#8218;|&#x201a;/g, '‚');\r\nstr = str.replace(/&ldquo;|&#8220;|&#x201c;/g, '“');\r\nstr = str.replace(/&rdquo;|&#8221;|&#x201d;/g, '”');\r\nstr = str.replace(/&bdquo;|&#8222;|&#x201e;/g, '„');\r\nstr = str.replace(/&dagger;|&#8224;|&#x2020;/g, '†');\r\nstr = str.replace(/&Dagger;|&#8225;|&#x2021;/g, '‡');\r\nstr = str.replace(/&bull;|&#8226;|&#x2022;/g, '•');\r\nstr = str.replace(/&hellip;|&#8230;|&#x2026;/g, '…');\r\nstr = str.replace(/&permil;|&#8240;|&#x2030;/g, '‰');\r\nstr = str.replace(/&prime;|&#8242;|&#x2032;/g, '′');\r\nstr = str.replace(/&Prime;|&#8243;|&#x2033;/g, '″');\r\nstr = str.replace(/&lsaquo;|&#8249;|&#x2039;/g, '‹');\r\nstr = str.replace(/&rsaquo;|&#8250;|&#x203a;/g, '›');\r\nstr = str.replace(/&oline;|&#8254;|&#x203e;/g, '‾');\r\nstr = str.replace(/&euro;|&#8364;|&#x20ac;/g, '€');\r\nstr = str.replace(/&trade;|&#8482;|&#x2122;/g, '™');\r\nstr = str.replace(/&larr;|&#8592;|&#x2190;/g, '←');\r\nstr = str.replace(/&uarr;|&#8593;|&#x2191;/g, '↑');\r\nstr = str.replace(/&rarr;|&#8594;|&#x2192;/g, '→');\r\nstr = str.replace(/&darr;|&#8595;|&#x2193;/g, '↓');\r\nstr = str.replace(/&harr;|&#8596;|&#x2194;/g, '↔');\r\nstr = str.replace(/&crarr;|&#8629;|&#x21b5;/g, '↵');\r\nstr = str.replace(/&lceil;|&#8968;|&#x2308;/g, '⌈');\r\nstr = str.replace(/&rceil;|&#8969;|&#x2309;/g, '⌉');\r\nstr = str.replace(/&lfloor;|&#8970;|&#x230a;/g, '⌊');\r\nstr = str.replace(/&rfloor;|&#8971;|&#x230b;/g, '⌋');\r\nstr = str.replace(/&loz;|&#9674;|&#x25ca;/g, '◊');\r\nstr = str.replace(/&spades;|&#9824;|&#x2660;/g, '♠');\r\nstr = str.replace(/&clubs;|&#9827;|&#x2663;/g, '♣');\r\nstr = str.replace(/&hearts;|&#9829;|&#x2665;/g, '♥');\r\nstr = str.replace(/&diams;|&#9830;|&#x2666;/g, '♦');\r\nreturn str;\r\n}\r\n\r\nfunction strDiscode(str) {\r\n  str = strNumDiscode(str);\r\n  str = strGreeceDiscode(str);\r\n  str = strcharacterDiscode(str);\r\n  str = strOtherDiscode(str);\r\n  return str;\r\n}\r\n\r\nfunction urlToHttpUrl(url, domain) {\r\n  if (/^\\/\\//.test(url)) {\r\n    return `https:${url}`;\r\n  } else if (/^\\//.test(url)) {\r\n    return `https://${domain}${url}`;\r\n  }\r\n  return url;\r\n}\r\n\r\nexport default {\r\n  strDiscode,\r\n  urlToHttpUrl,\r\n};\r\n","/**\r\n *\r\n * htmlParser改造自: https://github.com/blowsie/Pure-JavaScript-HTML5-Parser\r\n *\r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n *\r\n * github地址: https://github.com/icindy/wxParse\r\n *\r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n// Regular Expressions for parsing tags and attributes\r\n\r\nconst startTag = /^<([-A-Za-z0-9_]+)((?:\\s+[a-zA-Z0-9_:][-a-zA-Z0-9_:.]*(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)>/;\r\nconst endTag = /^<\\/([-A-Za-z0-9_]+)[^>]*>/;\r\nconst attr = /([a-zA-Z0-9_:][-a-zA-Z0-9_:.]*)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g;\r\n\r\nfunction makeMap(str) {\r\n  const obj = {};\r\n  const items = str.split(',');\r\n  for (let i = 0; i < items.length; i += 1) obj[items[i]] = true;\r\n  return obj;\r\n}\r\n\r\n// Empty Elements - HTML 5\r\nconst empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr');\r\n\r\n// Block Elements - HTML 5\r\nconst block = makeMap('address,code,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video');\r\n\r\n// Inline Elements - HTML 5\r\nconst inline = makeMap('a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var');\r\n\r\n// Elements that you can, intentionally, leave open\r\n// (and which close themselves)\r\nconst closeSelf = makeMap('colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr');\r\n\r\n// Attributes that have their values filled in disabled=\"disabled\"\r\nconst fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected');\r\n\r\nfunction HTMLParser(html, handler) {\r\n  let index;\r\n  let chars;\r\n  let match;\r\n  let last = html;\r\n  const stack = [];\r\n\r\n  stack.last = () => stack[stack.length - 1];\r\n\r\n  function parseEndTag(tag, tagName) {\r\n    // If no tag name is provided, clean shop\r\n    let pos;\r\n    if (!tagName) {\r\n      pos = 0;\r\n    } else {\r\n      // Find the closest opened tag of the same type\r\n      tagName = tagName.toLowerCase();\r\n      for (pos = stack.length - 1; pos >= 0; pos -= 1) {\r\n        if (stack[pos] === tagName) break;\r\n      }\r\n    }\r\n    if (pos >= 0) {\r\n      // Close all the open elements, up the stack\r\n      for (let i = stack.length - 1; i >= pos; i -= 1) {\r\n        if (handler.end) handler.end(stack[i]);\r\n      }\r\n\r\n      // Remove the open elements from the stack\r\n      stack.length = pos;\r\n    }\r\n  }\r\n\r\n  function parseStartTag(tag, tagName, rest, unary) {\r\n    tagName = tagName.toLowerCase();\r\n\r\n    if (block[tagName]) {\r\n      while (stack.last() && inline[stack.last()]) {\r\n        parseEndTag('', stack.last());\r\n      }\r\n    }\r\n\r\n    if (closeSelf[tagName] && stack.last() === tagName) {\r\n      parseEndTag('', tagName);\r\n    }\r\n\r\n    unary = empty[tagName] || !!unary;\r\n\r\n    if (!unary) stack.push(tagName);\r\n\r\n    if (handler.start) {\r\n      const attrs = [];\r\n\r\n      rest.replace(attr, function genAttr(matches, name) {\r\n        const value = arguments[2] || arguments[3] || arguments[4] || (fillAttrs[name] ? name : '');\r\n\r\n        attrs.push({\r\n          name,\r\n          value,\r\n          escaped: value.replace(/(^|[^\\\\])\"/g, '$1\\\\\"'), // \"\r\n        });\r\n      });\r\n\r\n      if (handler.start) {\r\n        handler.start(tagName, attrs, unary);\r\n      }\r\n    }\r\n  }\r\n\r\n  while (html) {\r\n    chars = true;\r\n\r\n    if (html.indexOf('</') === 0) {\r\n      match = html.match(endTag);\r\n\r\n      if (match) {\r\n        html = html.substring(match[0].length);\r\n        match[0].replace(endTag, parseEndTag);\r\n        chars = false;\r\n      }\r\n\r\n      // start tag\r\n    } else if (html.indexOf('<') === 0) {\r\n      match = html.match(startTag);\r\n\r\n      if (match) {\r\n        html = html.substring(match[0].length);\r\n        match[0].replace(startTag, parseStartTag);\r\n        chars = false;\r\n      }\r\n    }\r\n\r\n    if (chars) {\r\n      index = html.indexOf('<');\r\n      let text = '';\r\n      while (index === 0) {\r\n        text += '<';\r\n        html = html.substring(1);\r\n        index = html.indexOf('<');\r\n      }\r\n      text += index < 0 ? html : html.substring(0, index);\r\n      html = index < 0 ? '' : html.substring(index);\r\n\r\n      if (handler.chars) handler.chars(text);\r\n    }\r\n\r\n    if (html === last) throw new Error(`Parse Error: ${html}`);\r\n    last = html;\r\n  }\r\n\r\n  // Clean up any remaining tags\r\n  parseEndTag();\r\n}\r\n\r\nexport default HTMLParser;\r\n","//---------------------------------------------------------------------\r\n// uQRCode 二维码生成插件 v3.2.2\r\n// \r\n// uQRCode 是一款使用方式简单，高扩展的二维码生成插件。支持全端生成，支持canvas的地方就可以使用uQRCode。\r\n// \r\n// Copyright (c) Sansnn uQRCode All rights reserved.\r\n// Licensed ( http://www.apache.org/licenses/LICENSE-2.0 )\r\n// 复制使用请保留本段注释，感谢支持开源！\r\n// \r\n// 开源地址：\r\n// https://github.com/Sansnn/uQRCode\r\n// \r\n// uni-app插件市场地址：\r\n// https://ext.dcloud.net.cn/plugin?id=1287\r\n//---------------------------------------------------------------------\r\n\r\n\"use strict\";\r\n\r\nfunction uQRCode(options, canvasContext, loadImage) {\r\n  this.options = uQRCode.getOptions(options);\r\n  this.canvasContext = uQRCode.getCanvasContext(canvasContext);\r\n  this.loadImage = uQRCode.getLoadImage(loadImage);\r\n}\r\n\r\n(function() {\r\n  //---------------------------------------------------------------------\r\n  // QRCode for JavaScript\r\n  //\r\n  // Copyright (c) 2009 Kazuhiko Arase\r\n  //\r\n  // URL: http://www.d-project.com/\r\n  //\r\n  // Licensed under the MIT license:\r\n  //   http://www.opensource.org/licenses/mit-license.php\r\n  //\r\n  // The word \"QR Code\" is registered trademark of \r\n  // DENSO WAVE INCORPORATED\r\n  //   http://www.denso-wave.com/qrcode/faqpatent-e.html\r\n  //\r\n  //---------------------------------------------------------------------\r\n\r\n  //---------------------------------------------------------------------\r\n  // QR8bitByte\r\n  //---------------------------------------------------------------------\r\n\r\n  function QR8bitByte(data) {\r\n    this.mode = QRMode.MODE_8BIT_BYTE;\r\n    this.data = data;\r\n  }\r\n\r\n  QR8bitByte.prototype = {\r\n\r\n    getLength: function(buffer) {\r\n      return this.data.length;\r\n    },\r\n\r\n    write: function(buffer) {\r\n      for (var i = 0; i < this.data.length; i++) {\r\n        // not JIS ...\r\n        buffer.put(this.data.charCodeAt(i), 8);\r\n      }\r\n    }\r\n  };\r\n\r\n  //---------------------------------------------------------------------\r\n  // QRCode\r\n  //---------------------------------------------------------------------\r\n\r\n  function QRCode(typeNumber, errorCorrectLevel) {\r\n    this.typeNumber = typeNumber;\r\n    this.errorCorrectLevel = errorCorrectLevel;\r\n    this.modules = null;\r\n    this.moduleCount = 0;\r\n    this.dataCache = null;\r\n    this.dataList = new Array();\r\n  }\r\n\r\n  QRCode.prototype = {\r\n\r\n    addData: function(data) {\r\n      var newData = new QR8bitByte(data);\r\n      this.dataList.push(newData);\r\n      this.dataCache = null;\r\n    },\r\n\r\n    isDark: function(row, col) {\r\n      if (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\r\n        throw new Error(row + \",\" + col);\r\n      }\r\n      return this.modules[row][col];\r\n    },\r\n\r\n    getModuleCount: function() {\r\n      return this.moduleCount;\r\n    },\r\n\r\n    make: function() {\r\n      // Calculate automatically typeNumber if provided is < 1\r\n      if (this.typeNumber < 1) {\r\n        var typeNumber = 1;\r\n        for (typeNumber = 1; typeNumber < 40; typeNumber++) {\r\n          var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\r\n\r\n          var buffer = new QRBitBuffer();\r\n          var totalDataCount = 0;\r\n          for (var i = 0; i < rsBlocks.length; i++) {\r\n            totalDataCount += rsBlocks[i].dataCount;\r\n          }\r\n\r\n          for (var i = 0; i < this.dataList.length; i++) {\r\n            var data = this.dataList[i];\r\n            buffer.put(data.mode, 4);\r\n            buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\r\n            data.write(buffer);\r\n          }\r\n          if (buffer.getLengthInBits() <= totalDataCount * 8)\r\n            break;\r\n        }\r\n        this.typeNumber = typeNumber;\r\n      }\r\n      this.makeImpl(false, this.getBestMaskPattern());\r\n    },\r\n\r\n    makeImpl: function(test, maskPattern) {\r\n\r\n      this.moduleCount = this.typeNumber * 4 + 17;\r\n      this.modules = new Array(this.moduleCount);\r\n\r\n      for (var row = 0; row < this.moduleCount; row++) {\r\n\r\n        this.modules[row] = new Array(this.moduleCount);\r\n\r\n        for (var col = 0; col < this.moduleCount; col++) {\r\n          this.modules[row][col] = null; //(col + row) % 3;\r\n        }\r\n      }\r\n\r\n      this.setupPositionProbePattern(0, 0);\r\n      this.setupPositionProbePattern(this.moduleCount - 7, 0);\r\n      this.setupPositionProbePattern(0, this.moduleCount - 7);\r\n      this.setupPositionAdjustPattern();\r\n      this.setupTimingPattern();\r\n      this.setupTypeInfo(test, maskPattern);\r\n\r\n      if (this.typeNumber >= 7) {\r\n        this.setupTypeNumber(test);\r\n      }\r\n\r\n      if (this.dataCache == null) {\r\n        this.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\r\n      }\r\n\r\n      this.mapData(this.dataCache, maskPattern);\r\n    },\r\n\r\n    setupPositionProbePattern: function(row, col) {\r\n\r\n      for (var r = -1; r <= 7; r++) {\r\n\r\n        if (row + r <= -1 || this.moduleCount <= row + r) continue;\r\n\r\n        for (var c = -1; c <= 7; c++) {\r\n\r\n          if (col + c <= -1 || this.moduleCount <= col + c) continue;\r\n\r\n          if ((0 <= r && r <= 6 && (c == 0 || c == 6)) ||\r\n            (0 <= c && c <= 6 && (r == 0 || r == 6)) ||\r\n            (2 <= r && r <= 4 && 2 <= c && c <= 4)) {\r\n            this.modules[row + r][col + c] = true;\r\n          } else {\r\n            this.modules[row + r][col + c] = false;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    getBestMaskPattern: function() {\r\n\r\n      var minLostPoint = 0;\r\n      var pattern = 0;\r\n\r\n      for (var i = 0; i < 8; i++) {\r\n\r\n        this.makeImpl(true, i);\r\n\r\n        var lostPoint = QRUtil.getLostPoint(this);\r\n\r\n        if (i == 0 || minLostPoint > lostPoint) {\r\n          minLostPoint = lostPoint;\r\n          pattern = i;\r\n        }\r\n      }\r\n\r\n      return pattern;\r\n    },\r\n\r\n    createMovieClip: function(target_mc, instance_name, depth) {\r\n\r\n      var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\r\n      var cs = 1;\r\n\r\n      this.make();\r\n\r\n      for (var row = 0; row < this.modules.length; row++) {\r\n\r\n        var y = row * cs;\r\n\r\n        for (var col = 0; col < this.modules[row].length; col++) {\r\n\r\n          var x = col * cs;\r\n          var dark = this.modules[row][col];\r\n\r\n          if (dark) {\r\n            qr_mc.beginFill(0, 100);\r\n            qr_mc.moveTo(x, y);\r\n            qr_mc.lineTo(x + cs, y);\r\n            qr_mc.lineTo(x + cs, y + cs);\r\n            qr_mc.lineTo(x, y + cs);\r\n            qr_mc.endFill();\r\n          }\r\n        }\r\n      }\r\n\r\n      return qr_mc;\r\n    },\r\n\r\n    setupTimingPattern: function() {\r\n\r\n      for (var r = 8; r < this.moduleCount - 8; r++) {\r\n        if (this.modules[r][6] != null) {\r\n          continue;\r\n        }\r\n        this.modules[r][6] = (r % 2 == 0);\r\n      }\r\n\r\n      for (var c = 8; c < this.moduleCount - 8; c++) {\r\n        if (this.modules[6][c] != null) {\r\n          continue;\r\n        }\r\n        this.modules[6][c] = (c % 2 == 0);\r\n      }\r\n    },\r\n\r\n    setupPositionAdjustPattern: function() {\r\n\r\n      var pos = QRUtil.getPatternPosition(this.typeNumber);\r\n\r\n      for (var i = 0; i < pos.length; i++) {\r\n\r\n        for (var j = 0; j < pos.length; j++) {\r\n\r\n          var row = pos[i];\r\n          var col = pos[j];\r\n\r\n          if (this.modules[row][col] != null) {\r\n            continue;\r\n          }\r\n\r\n          for (var r = -2; r <= 2; r++) {\r\n\r\n            for (var c = -2; c <= 2; c++) {\r\n\r\n              if (r == -2 || r == 2 || c == -2 || c == 2 ||\r\n                (r == 0 && c == 0)) {\r\n                this.modules[row + r][col + c] = true;\r\n              } else {\r\n                this.modules[row + r][col + c] = false;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    setupTypeNumber: function(test) {\r\n\r\n      var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\r\n\r\n      for (var i = 0; i < 18; i++) {\r\n        var mod = (!test && ((bits >> i) & 1) == 1);\r\n        this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\r\n      }\r\n\r\n      for (var i = 0; i < 18; i++) {\r\n        var mod = (!test && ((bits >> i) & 1) == 1);\r\n        this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\r\n      }\r\n    },\r\n\r\n    setupTypeInfo: function(test, maskPattern) {\r\n\r\n      var data = (this.errorCorrectLevel << 3) | maskPattern;\r\n      var bits = QRUtil.getBCHTypeInfo(data);\r\n\r\n      // vertical\t\t\r\n      for (var i = 0; i < 15; i++) {\r\n\r\n        var mod = (!test && ((bits >> i) & 1) == 1);\r\n\r\n        if (i < 6) {\r\n          this.modules[i][8] = mod;\r\n        } else if (i < 8) {\r\n          this.modules[i + 1][8] = mod;\r\n        } else {\r\n          this.modules[this.moduleCount - 15 + i][8] = mod;\r\n        }\r\n      }\r\n\r\n      // horizontal\r\n      for (var i = 0; i < 15; i++) {\r\n\r\n        var mod = (!test && ((bits >> i) & 1) == 1);\r\n\r\n        if (i < 8) {\r\n          this.modules[8][this.moduleCount - i - 1] = mod;\r\n        } else if (i < 9) {\r\n          this.modules[8][15 - i - 1 + 1] = mod;\r\n        } else {\r\n          this.modules[8][15 - i - 1] = mod;\r\n        }\r\n      }\r\n\r\n      // fixed module\r\n      this.modules[this.moduleCount - 8][8] = (!test);\r\n\r\n    },\r\n\r\n    mapData: function(data, maskPattern) {\r\n\r\n      var inc = -1;\r\n      var row = this.moduleCount - 1;\r\n      var bitIndex = 7;\r\n      var byteIndex = 0;\r\n\r\n      for (var col = this.moduleCount - 1; col > 0; col -= 2) {\r\n\r\n        if (col == 6) col--;\r\n\r\n        while (true) {\r\n\r\n          for (var c = 0; c < 2; c++) {\r\n\r\n            if (this.modules[row][col - c] == null) {\r\n\r\n              var dark = false;\r\n\r\n              if (byteIndex < data.length) {\r\n                dark = (((data[byteIndex] >>> bitIndex) & 1) == 1);\r\n              }\r\n\r\n              var mask = QRUtil.getMask(maskPattern, row, col - c);\r\n\r\n              if (mask) {\r\n                dark = !dark;\r\n              }\r\n\r\n              this.modules[row][col - c] = dark;\r\n              bitIndex--;\r\n\r\n              if (bitIndex == -1) {\r\n                byteIndex++;\r\n                bitIndex = 7;\r\n              }\r\n            }\r\n          }\r\n\r\n          row += inc;\r\n\r\n          if (row < 0 || this.moduleCount <= row) {\r\n            row -= inc;\r\n            inc = -inc;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n  };\r\n\r\n  QRCode.PAD0 = 0xEC;\r\n  QRCode.PAD1 = 0x11;\r\n\r\n  QRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {\r\n\r\n    var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\r\n\r\n    var buffer = new QRBitBuffer();\r\n\r\n    for (var i = 0; i < dataList.length; i++) {\r\n      var data = dataList[i];\r\n      buffer.put(data.mode, 4);\r\n      buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\r\n      data.write(buffer);\r\n    }\r\n\r\n    // calc num max data.\r\n    var totalDataCount = 0;\r\n    for (var i = 0; i < rsBlocks.length; i++) {\r\n      totalDataCount += rsBlocks[i].dataCount;\r\n    }\r\n\r\n    if (buffer.getLengthInBits() > totalDataCount * 8) {\r\n      throw new Error(\"code length overflow. (\" +\r\n        buffer.getLengthInBits() +\r\n        \">\" +\r\n        totalDataCount * 8 +\r\n        \")\");\r\n    }\r\n\r\n    // end code\r\n    if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\r\n      buffer.put(0, 4);\r\n    }\r\n\r\n    // padding\r\n    while (buffer.getLengthInBits() % 8 != 0) {\r\n      buffer.putBit(false);\r\n    }\r\n\r\n    // padding\r\n    while (true) {\r\n\r\n      if (buffer.getLengthInBits() >= totalDataCount * 8) {\r\n        break;\r\n      }\r\n      buffer.put(QRCode.PAD0, 8);\r\n\r\n      if (buffer.getLengthInBits() >= totalDataCount * 8) {\r\n        break;\r\n      }\r\n      buffer.put(QRCode.PAD1, 8);\r\n    }\r\n\r\n    return QRCode.createBytes(buffer, rsBlocks);\r\n  }\r\n\r\n  QRCode.createBytes = function(buffer, rsBlocks) {\r\n\r\n    var offset = 0;\r\n\r\n    var maxDcCount = 0;\r\n    var maxEcCount = 0;\r\n\r\n    var dcdata = new Array(rsBlocks.length);\r\n    var ecdata = new Array(rsBlocks.length);\r\n\r\n    for (var r = 0; r < rsBlocks.length; r++) {\r\n\r\n      var dcCount = rsBlocks[r].dataCount;\r\n      var ecCount = rsBlocks[r].totalCount - dcCount;\r\n\r\n      maxDcCount = Math.max(maxDcCount, dcCount);\r\n      maxEcCount = Math.max(maxEcCount, ecCount);\r\n\r\n      dcdata[r] = new Array(dcCount);\r\n\r\n      for (var i = 0; i < dcdata[r].length; i++) {\r\n        dcdata[r][i] = 0xff & buffer.buffer[i + offset];\r\n      }\r\n      offset += dcCount;\r\n\r\n      var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\r\n      var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\r\n\r\n      var modPoly = rawPoly.mod(rsPoly);\r\n      ecdata[r] = new Array(rsPoly.getLength() - 1);\r\n      for (var i = 0; i < ecdata[r].length; i++) {\r\n        var modIndex = i + modPoly.getLength() - ecdata[r].length;\r\n        ecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0;\r\n      }\r\n\r\n    }\r\n\r\n    var totalCodeCount = 0;\r\n    for (var i = 0; i < rsBlocks.length; i++) {\r\n      totalCodeCount += rsBlocks[i].totalCount;\r\n    }\r\n\r\n    var data = new Array(totalCodeCount);\r\n    var index = 0;\r\n\r\n    for (var i = 0; i < maxDcCount; i++) {\r\n      for (var r = 0; r < rsBlocks.length; r++) {\r\n        if (i < dcdata[r].length) {\r\n          data[index++] = dcdata[r][i];\r\n        }\r\n      }\r\n    }\r\n\r\n    for (var i = 0; i < maxEcCount; i++) {\r\n      for (var r = 0; r < rsBlocks.length; r++) {\r\n        if (i < ecdata[r].length) {\r\n          data[index++] = ecdata[r][i];\r\n        }\r\n      }\r\n    }\r\n\r\n    return data;\r\n\r\n  }\r\n\r\n  //---------------------------------------------------------------------\r\n  // QRMode\r\n  //---------------------------------------------------------------------\r\n\r\n  var QRMode = {\r\n    MODE_NUMBER: 1 << 0,\r\n    MODE_ALPHA_NUM: 1 << 1,\r\n    MODE_8BIT_BYTE: 1 << 2,\r\n    MODE_KANJI: 1 << 3\r\n  };\r\n\r\n  //---------------------------------------------------------------------\r\n  // QRErrorCorrectLevel\r\n  //---------------------------------------------------------------------\r\n\r\n  var QRErrorCorrectLevel = {\r\n    L: 1,\r\n    M: 0,\r\n    Q: 3,\r\n    H: 2\r\n  };\r\n\r\n  //---------------------------------------------------------------------\r\n  // QRMaskPattern\r\n  //---------------------------------------------------------------------\r\n\r\n  var QRMaskPattern = {\r\n    PATTERN000: 0,\r\n    PATTERN001: 1,\r\n    PATTERN010: 2,\r\n    PATTERN011: 3,\r\n    PATTERN100: 4,\r\n    PATTERN101: 5,\r\n    PATTERN110: 6,\r\n    PATTERN111: 7\r\n  };\r\n\r\n  //---------------------------------------------------------------------\r\n  // QRUtil\r\n  //---------------------------------------------------------------------\r\n\r\n  var QRUtil = {\r\n\r\n    PATTERN_POSITION_TABLE: [\r\n      [],\r\n      [6, 18],\r\n      [6, 22],\r\n      [6, 26],\r\n      [6, 30],\r\n      [6, 34],\r\n      [6, 22, 38],\r\n      [6, 24, 42],\r\n      [6, 26, 46],\r\n      [6, 28, 50],\r\n      [6, 30, 54],\r\n      [6, 32, 58],\r\n      [6, 34, 62],\r\n      [6, 26, 46, 66],\r\n      [6, 26, 48, 70],\r\n      [6, 26, 50, 74],\r\n      [6, 30, 54, 78],\r\n      [6, 30, 56, 82],\r\n      [6, 30, 58, 86],\r\n      [6, 34, 62, 90],\r\n      [6, 28, 50, 72, 94],\r\n      [6, 26, 50, 74, 98],\r\n      [6, 30, 54, 78, 102],\r\n      [6, 28, 54, 80, 106],\r\n      [6, 32, 58, 84, 110],\r\n      [6, 30, 58, 86, 114],\r\n      [6, 34, 62, 90, 118],\r\n      [6, 26, 50, 74, 98, 122],\r\n      [6, 30, 54, 78, 102, 126],\r\n      [6, 26, 52, 78, 104, 130],\r\n      [6, 30, 56, 82, 108, 134],\r\n      [6, 34, 60, 86, 112, 138],\r\n      [6, 30, 58, 86, 114, 142],\r\n      [6, 34, 62, 90, 118, 146],\r\n      [6, 30, 54, 78, 102, 126, 150],\r\n      [6, 24, 50, 76, 102, 128, 154],\r\n      [6, 28, 54, 80, 106, 132, 158],\r\n      [6, 32, 58, 84, 110, 136, 162],\r\n      [6, 26, 54, 82, 110, 138, 166],\r\n      [6, 30, 58, 86, 114, 142, 170]\r\n    ],\r\n\r\n    G15: (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\r\n    G18: (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\r\n    G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),\r\n\r\n    getBCHTypeInfo: function(data) {\r\n      var d = data << 10;\r\n      while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\r\n        d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15)));\r\n      }\r\n      return ((data << 10) | d) ^ QRUtil.G15_MASK;\r\n    },\r\n\r\n    getBCHTypeNumber: function(data) {\r\n      var d = data << 12;\r\n      while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\r\n        d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18)));\r\n      }\r\n      return (data << 12) | d;\r\n    },\r\n\r\n    getBCHDigit: function(data) {\r\n\r\n      var digit = 0;\r\n\r\n      while (data != 0) {\r\n        digit++;\r\n        data >>>= 1;\r\n      }\r\n\r\n      return digit;\r\n    },\r\n\r\n    getPatternPosition: function(typeNumber) {\r\n      return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\r\n    },\r\n\r\n    getMask: function(maskPattern, i, j) {\r\n\r\n      switch (maskPattern) {\r\n\r\n        case QRMaskPattern.PATTERN000:\r\n          return (i + j) % 2 == 0;\r\n        case QRMaskPattern.PATTERN001:\r\n          return i % 2 == 0;\r\n        case QRMaskPattern.PATTERN010:\r\n          return j % 3 == 0;\r\n        case QRMaskPattern.PATTERN011:\r\n          return (i + j) % 3 == 0;\r\n        case QRMaskPattern.PATTERN100:\r\n          return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\r\n        case QRMaskPattern.PATTERN101:\r\n          return (i * j) % 2 + (i * j) % 3 == 0;\r\n        case QRMaskPattern.PATTERN110:\r\n          return ((i * j) % 2 + (i * j) % 3) % 2 == 0;\r\n        case QRMaskPattern.PATTERN111:\r\n          return ((i * j) % 3 + (i + j) % 2) % 2 == 0;\r\n\r\n        default:\r\n          throw new Error(\"bad maskPattern:\" + maskPattern);\r\n      }\r\n    },\r\n\r\n    getErrorCorrectPolynomial: function(errorCorrectLength) {\r\n\r\n      var a = new QRPolynomial([1], 0);\r\n\r\n      for (var i = 0; i < errorCorrectLength; i++) {\r\n        a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0));\r\n      }\r\n\r\n      return a;\r\n    },\r\n\r\n    getLengthInBits: function(mode, type) {\r\n\r\n      if (1 <= type && type < 10) {\r\n\r\n        // 1 - 9\r\n\r\n        switch (mode) {\r\n          case QRMode.MODE_NUMBER:\r\n            return 10;\r\n          case QRMode.MODE_ALPHA_NUM:\r\n            return 9;\r\n          case QRMode.MODE_8BIT_BYTE:\r\n            return 8;\r\n          case QRMode.MODE_KANJI:\r\n            return 8;\r\n          default:\r\n            throw new Error(\"mode:\" + mode);\r\n        }\r\n\r\n      } else if (type < 27) {\r\n\r\n        // 10 - 26\r\n\r\n        switch (mode) {\r\n          case QRMode.MODE_NUMBER:\r\n            return 12;\r\n          case QRMode.MODE_ALPHA_NUM:\r\n            return 11;\r\n          case QRMode.MODE_8BIT_BYTE:\r\n            return 16;\r\n          case QRMode.MODE_KANJI:\r\n            return 10;\r\n          default:\r\n            throw new Error(\"mode:\" + mode);\r\n        }\r\n\r\n      } else if (type < 41) {\r\n\r\n        // 27 - 40\r\n\r\n        switch (mode) {\r\n          case QRMode.MODE_NUMBER:\r\n            return 14;\r\n          case QRMode.MODE_ALPHA_NUM:\r\n            return 13;\r\n          case QRMode.MODE_8BIT_BYTE:\r\n            return 16;\r\n          case QRMode.MODE_KANJI:\r\n            return 12;\r\n          default:\r\n            throw new Error(\"mode:\" + mode);\r\n        }\r\n\r\n      } else {\r\n        throw new Error(\"type:\" + type);\r\n      }\r\n    },\r\n\r\n    getLostPoint: function(qrCode) {\r\n\r\n      var moduleCount = qrCode.getModuleCount();\r\n\r\n      var lostPoint = 0;\r\n\r\n      // LEVEL1\r\n\r\n      for (var row = 0; row < moduleCount; row++) {\r\n\r\n        for (var col = 0; col < moduleCount; col++) {\r\n\r\n          var sameCount = 0;\r\n          var dark = qrCode.isDark(row, col);\r\n\r\n          for (var r = -1; r <= 1; r++) {\r\n\r\n            if (row + r < 0 || moduleCount <= row + r) {\r\n              continue;\r\n            }\r\n\r\n            for (var c = -1; c <= 1; c++) {\r\n\r\n              if (col + c < 0 || moduleCount <= col + c) {\r\n                continue;\r\n              }\r\n\r\n              if (r == 0 && c == 0) {\r\n                continue;\r\n              }\r\n\r\n              if (dark == qrCode.isDark(row + r, col + c)) {\r\n                sameCount++;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (sameCount > 5) {\r\n            lostPoint += (3 + sameCount - 5);\r\n          }\r\n        }\r\n      }\r\n\r\n      // LEVEL2\r\n\r\n      for (var row = 0; row < moduleCount - 1; row++) {\r\n        for (var col = 0; col < moduleCount - 1; col++) {\r\n          var count = 0;\r\n          if (qrCode.isDark(row, col)) count++;\r\n          if (qrCode.isDark(row + 1, col)) count++;\r\n          if (qrCode.isDark(row, col + 1)) count++;\r\n          if (qrCode.isDark(row + 1, col + 1)) count++;\r\n          if (count == 0 || count == 4) {\r\n            lostPoint += 3;\r\n          }\r\n        }\r\n      }\r\n\r\n      // LEVEL3\r\n\r\n      for (var row = 0; row < moduleCount; row++) {\r\n        for (var col = 0; col < moduleCount - 6; col++) {\r\n          if (qrCode.isDark(row, col) &&\r\n            !qrCode.isDark(row, col + 1) &&\r\n            qrCode.isDark(row, col + 2) &&\r\n            qrCode.isDark(row, col + 3) &&\r\n            qrCode.isDark(row, col + 4) &&\r\n            !qrCode.isDark(row, col + 5) &&\r\n            qrCode.isDark(row, col + 6)) {\r\n            lostPoint += 40;\r\n          }\r\n        }\r\n      }\r\n\r\n      for (var col = 0; col < moduleCount; col++) {\r\n        for (var row = 0; row < moduleCount - 6; row++) {\r\n          if (qrCode.isDark(row, col) &&\r\n            !qrCode.isDark(row + 1, col) &&\r\n            qrCode.isDark(row + 2, col) &&\r\n            qrCode.isDark(row + 3, col) &&\r\n            qrCode.isDark(row + 4, col) &&\r\n            !qrCode.isDark(row + 5, col) &&\r\n            qrCode.isDark(row + 6, col)) {\r\n            lostPoint += 40;\r\n          }\r\n        }\r\n      }\r\n\r\n      // LEVEL4\r\n\r\n      var darkCount = 0;\r\n\r\n      for (var col = 0; col < moduleCount; col++) {\r\n        for (var row = 0; row < moduleCount; row++) {\r\n          if (qrCode.isDark(row, col)) {\r\n            darkCount++;\r\n          }\r\n        }\r\n      }\r\n\r\n      var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\r\n      lostPoint += ratio * 10;\r\n\r\n      return lostPoint;\r\n    }\r\n\r\n  };\r\n\r\n\r\n  //---------------------------------------------------------------------\r\n  // QRMath\r\n  //---------------------------------------------------------------------\r\n\r\n  var QRMath = {\r\n\r\n    glog: function(n) {\r\n\r\n      if (n < 1) {\r\n        throw new Error(\"glog(\" + n + \")\");\r\n      }\r\n\r\n      return QRMath.LOG_TABLE[n];\r\n    },\r\n\r\n    gexp: function(n) {\r\n\r\n      while (n < 0) {\r\n        n += 255;\r\n      }\r\n\r\n      while (n >= 256) {\r\n        n -= 255;\r\n      }\r\n\r\n      return QRMath.EXP_TABLE[n];\r\n    },\r\n\r\n    EXP_TABLE: new Array(256),\r\n\r\n    LOG_TABLE: new Array(256)\r\n\r\n  };\r\n\r\n  for (var i = 0; i < 8; i++) {\r\n    QRMath.EXP_TABLE[i] = 1 << i;\r\n  }\r\n  for (var i = 8; i < 256; i++) {\r\n    QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^\r\n      QRMath.EXP_TABLE[i - 5] ^\r\n      QRMath.EXP_TABLE[i - 6] ^\r\n      QRMath.EXP_TABLE[i - 8];\r\n  }\r\n  for (var i = 0; i < 255; i++) {\r\n    QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;\r\n  }\r\n\r\n  //---------------------------------------------------------------------\r\n  // QRPolynomial\r\n  //---------------------------------------------------------------------\r\n\r\n  function QRPolynomial(num, shift) {\r\n\r\n    if (num.length == undefined) {\r\n      throw new Error(num.length + \"/\" + shift);\r\n    }\r\n\r\n    var offset = 0;\r\n\r\n    while (offset < num.length && num[offset] == 0) {\r\n      offset++;\r\n    }\r\n\r\n    this.num = new Array(num.length - offset + shift);\r\n    for (var i = 0; i < num.length - offset; i++) {\r\n      this.num[i] = num[i + offset];\r\n    }\r\n  }\r\n\r\n  QRPolynomial.prototype = {\r\n\r\n    get: function(index) {\r\n      return this.num[index];\r\n    },\r\n\r\n    getLength: function() {\r\n      return this.num.length;\r\n    },\r\n\r\n    multiply: function(e) {\r\n\r\n      var num = new Array(this.getLength() + e.getLength() - 1);\r\n\r\n      for (var i = 0; i < this.getLength(); i++) {\r\n        for (var j = 0; j < e.getLength(); j++) {\r\n          num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)));\r\n        }\r\n      }\r\n\r\n      return new QRPolynomial(num, 0);\r\n    },\r\n\r\n    mod: function(e) {\r\n\r\n      if (this.getLength() - e.getLength() < 0) {\r\n        return this;\r\n      }\r\n\r\n      var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));\r\n\r\n      var num = new Array(this.getLength());\r\n\r\n      for (var i = 0; i < this.getLength(); i++) {\r\n        num[i] = this.get(i);\r\n      }\r\n\r\n      for (var i = 0; i < e.getLength(); i++) {\r\n        num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);\r\n      }\r\n\r\n      // recursive call\r\n      return new QRPolynomial(num, 0).mod(e);\r\n    }\r\n  };\r\n\r\n  //---------------------------------------------------------------------\r\n  // QRRSBlock\r\n  //---------------------------------------------------------------------\r\n\r\n  function QRRSBlock(totalCount, dataCount) {\r\n    this.totalCount = totalCount;\r\n    this.dataCount = dataCount;\r\n  }\r\n\r\n  QRRSBlock.RS_BLOCK_TABLE = [\r\n\r\n    // L\r\n    // M\r\n    // Q\r\n    // H\r\n\r\n    // 1\r\n    [1, 26, 19],\r\n    [1, 26, 16],\r\n    [1, 26, 13],\r\n    [1, 26, 9],\r\n\r\n    // 2\r\n    [1, 44, 34],\r\n    [1, 44, 28],\r\n    [1, 44, 22],\r\n    [1, 44, 16],\r\n\r\n    // 3\r\n    [1, 70, 55],\r\n    [1, 70, 44],\r\n    [2, 35, 17],\r\n    [2, 35, 13],\r\n\r\n    // 4\t\t\r\n    [1, 100, 80],\r\n    [2, 50, 32],\r\n    [2, 50, 24],\r\n    [4, 25, 9],\r\n\r\n    // 5\r\n    [1, 134, 108],\r\n    [2, 67, 43],\r\n    [2, 33, 15, 2, 34, 16],\r\n    [2, 33, 11, 2, 34, 12],\r\n\r\n    // 6\r\n    [2, 86, 68],\r\n    [4, 43, 27],\r\n    [4, 43, 19],\r\n    [4, 43, 15],\r\n\r\n    // 7\t\t\r\n    [2, 98, 78],\r\n    [4, 49, 31],\r\n    [2, 32, 14, 4, 33, 15],\r\n    [4, 39, 13, 1, 40, 14],\r\n\r\n    // 8\r\n    [2, 121, 97],\r\n    [2, 60, 38, 2, 61, 39],\r\n    [4, 40, 18, 2, 41, 19],\r\n    [4, 40, 14, 2, 41, 15],\r\n\r\n    // 9\r\n    [2, 146, 116],\r\n    [3, 58, 36, 2, 59, 37],\r\n    [4, 36, 16, 4, 37, 17],\r\n    [4, 36, 12, 4, 37, 13],\r\n\r\n    // 10\t\t\r\n    [2, 86, 68, 2, 87, 69],\r\n    [4, 69, 43, 1, 70, 44],\r\n    [6, 43, 19, 2, 44, 20],\r\n    [6, 43, 15, 2, 44, 16],\r\n\r\n    // 11\r\n    [4, 101, 81],\r\n    [1, 80, 50, 4, 81, 51],\r\n    [4, 50, 22, 4, 51, 23],\r\n    [3, 36, 12, 8, 37, 13],\r\n\r\n    // 12\r\n    [2, 116, 92, 2, 117, 93],\r\n    [6, 58, 36, 2, 59, 37],\r\n    [4, 46, 20, 6, 47, 21],\r\n    [7, 42, 14, 4, 43, 15],\r\n\r\n    // 13\r\n    [4, 133, 107],\r\n    [8, 59, 37, 1, 60, 38],\r\n    [8, 44, 20, 4, 45, 21],\r\n    [12, 33, 11, 4, 34, 12],\r\n\r\n    // 14\r\n    [3, 145, 115, 1, 146, 116],\r\n    [4, 64, 40, 5, 65, 41],\r\n    [11, 36, 16, 5, 37, 17],\r\n    [11, 36, 12, 5, 37, 13],\r\n\r\n    // 15\r\n    [5, 109, 87, 1, 110, 88],\r\n    [5, 65, 41, 5, 66, 42],\r\n    [5, 54, 24, 7, 55, 25],\r\n    [11, 36, 12],\r\n\r\n    // 16\r\n    [5, 122, 98, 1, 123, 99],\r\n    [7, 73, 45, 3, 74, 46],\r\n    [15, 43, 19, 2, 44, 20],\r\n    [3, 45, 15, 13, 46, 16],\r\n\r\n    // 17\r\n    [1, 135, 107, 5, 136, 108],\r\n    [10, 74, 46, 1, 75, 47],\r\n    [1, 50, 22, 15, 51, 23],\r\n    [2, 42, 14, 17, 43, 15],\r\n\r\n    // 18\r\n    [5, 150, 120, 1, 151, 121],\r\n    [9, 69, 43, 4, 70, 44],\r\n    [17, 50, 22, 1, 51, 23],\r\n    [2, 42, 14, 19, 43, 15],\r\n\r\n    // 19\r\n    [3, 141, 113, 4, 142, 114],\r\n    [3, 70, 44, 11, 71, 45],\r\n    [17, 47, 21, 4, 48, 22],\r\n    [9, 39, 13, 16, 40, 14],\r\n\r\n    // 20\r\n    [3, 135, 107, 5, 136, 108],\r\n    [3, 67, 41, 13, 68, 42],\r\n    [15, 54, 24, 5, 55, 25],\r\n    [15, 43, 15, 10, 44, 16],\r\n\r\n    // 21\r\n    [4, 144, 116, 4, 145, 117],\r\n    [17, 68, 42],\r\n    [17, 50, 22, 6, 51, 23],\r\n    [19, 46, 16, 6, 47, 17],\r\n\r\n    // 22\r\n    [2, 139, 111, 7, 140, 112],\r\n    [17, 74, 46],\r\n    [7, 54, 24, 16, 55, 25],\r\n    [34, 37, 13],\r\n\r\n    // 23\r\n    [4, 151, 121, 5, 152, 122],\r\n    [4, 75, 47, 14, 76, 48],\r\n    [11, 54, 24, 14, 55, 25],\r\n    [16, 45, 15, 14, 46, 16],\r\n\r\n    // 24\r\n    [6, 147, 117, 4, 148, 118],\r\n    [6, 73, 45, 14, 74, 46],\r\n    [11, 54, 24, 16, 55, 25],\r\n    [30, 46, 16, 2, 47, 17],\r\n\r\n    // 25\r\n    [8, 132, 106, 4, 133, 107],\r\n    [8, 75, 47, 13, 76, 48],\r\n    [7, 54, 24, 22, 55, 25],\r\n    [22, 45, 15, 13, 46, 16],\r\n\r\n    // 26\r\n    [10, 142, 114, 2, 143, 115],\r\n    [19, 74, 46, 4, 75, 47],\r\n    [28, 50, 22, 6, 51, 23],\r\n    [33, 46, 16, 4, 47, 17],\r\n\r\n    // 27\r\n    [8, 152, 122, 4, 153, 123],\r\n    [22, 73, 45, 3, 74, 46],\r\n    [8, 53, 23, 26, 54, 24],\r\n    [12, 45, 15, 28, 46, 16],\r\n\r\n    // 28\r\n    [3, 147, 117, 10, 148, 118],\r\n    [3, 73, 45, 23, 74, 46],\r\n    [4, 54, 24, 31, 55, 25],\r\n    [11, 45, 15, 31, 46, 16],\r\n\r\n    // 29\r\n    [7, 146, 116, 7, 147, 117],\r\n    [21, 73, 45, 7, 74, 46],\r\n    [1, 53, 23, 37, 54, 24],\r\n    [19, 45, 15, 26, 46, 16],\r\n\r\n    // 30\r\n    [5, 145, 115, 10, 146, 116],\r\n    [19, 75, 47, 10, 76, 48],\r\n    [15, 54, 24, 25, 55, 25],\r\n    [23, 45, 15, 25, 46, 16],\r\n\r\n    // 31\r\n    [13, 145, 115, 3, 146, 116],\r\n    [2, 74, 46, 29, 75, 47],\r\n    [42, 54, 24, 1, 55, 25],\r\n    [23, 45, 15, 28, 46, 16],\r\n\r\n    // 32\r\n    [17, 145, 115],\r\n    [10, 74, 46, 23, 75, 47],\r\n    [10, 54, 24, 35, 55, 25],\r\n    [19, 45, 15, 35, 46, 16],\r\n\r\n    // 33\r\n    [17, 145, 115, 1, 146, 116],\r\n    [14, 74, 46, 21, 75, 47],\r\n    [29, 54, 24, 19, 55, 25],\r\n    [11, 45, 15, 46, 46, 16],\r\n\r\n    // 34\r\n    [13, 145, 115, 6, 146, 116],\r\n    [14, 74, 46, 23, 75, 47],\r\n    [44, 54, 24, 7, 55, 25],\r\n    [59, 46, 16, 1, 47, 17],\r\n\r\n    // 35\r\n    [12, 151, 121, 7, 152, 122],\r\n    [12, 75, 47, 26, 76, 48],\r\n    [39, 54, 24, 14, 55, 25],\r\n    [22, 45, 15, 41, 46, 16],\r\n\r\n    // 36\r\n    [6, 151, 121, 14, 152, 122],\r\n    [6, 75, 47, 34, 76, 48],\r\n    [46, 54, 24, 10, 55, 25],\r\n    [2, 45, 15, 64, 46, 16],\r\n\r\n    // 37\r\n    [17, 152, 122, 4, 153, 123],\r\n    [29, 74, 46, 14, 75, 47],\r\n    [49, 54, 24, 10, 55, 25],\r\n    [24, 45, 15, 46, 46, 16],\r\n\r\n    // 38\r\n    [4, 152, 122, 18, 153, 123],\r\n    [13, 74, 46, 32, 75, 47],\r\n    [48, 54, 24, 14, 55, 25],\r\n    [42, 45, 15, 32, 46, 16],\r\n\r\n    // 39\r\n    [20, 147, 117, 4, 148, 118],\r\n    [40, 75, 47, 7, 76, 48],\r\n    [43, 54, 24, 22, 55, 25],\r\n    [10, 45, 15, 67, 46, 16],\r\n\r\n    // 40\r\n    [19, 148, 118, 6, 149, 119],\r\n    [18, 75, 47, 31, 76, 48],\r\n    [34, 54, 24, 34, 55, 25],\r\n    [20, 45, 15, 61, 46, 16]\r\n  ];\r\n\r\n  QRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\r\n\r\n    var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\r\n\r\n    if (rsBlock == undefined) {\r\n      throw new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" +\r\n        errorCorrectLevel);\r\n    }\r\n\r\n    var length = rsBlock.length / 3;\r\n\r\n    var list = new Array();\r\n\r\n    for (var i = 0; i < length; i++) {\r\n\r\n      var count = rsBlock[i * 3 + 0];\r\n      var totalCount = rsBlock[i * 3 + 1];\r\n      var dataCount = rsBlock[i * 3 + 2];\r\n\r\n      for (var j = 0; j < count; j++) {\r\n        list.push(new QRRSBlock(totalCount, dataCount));\r\n      }\r\n    }\r\n\r\n    return list;\r\n  }\r\n\r\n  QRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\r\n\r\n    switch (errorCorrectLevel) {\r\n      case QRErrorCorrectLevel.L:\r\n        return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\r\n      case QRErrorCorrectLevel.M:\r\n        return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\r\n      case QRErrorCorrectLevel.Q:\r\n        return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\r\n      case QRErrorCorrectLevel.H:\r\n        return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\r\n      default:\r\n        return undefined;\r\n    }\r\n  }\r\n\r\n  //---------------------------------------------------------------------\r\n  // QRBitBuffer\r\n  //---------------------------------------------------------------------\r\n\r\n  function QRBitBuffer() {\r\n    this.buffer = new Array();\r\n    this.length = 0;\r\n  }\r\n\r\n  QRBitBuffer.prototype = {\r\n\r\n    get: function(index) {\r\n      var bufIndex = Math.floor(index / 8);\r\n      return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) == 1;\r\n    },\r\n\r\n    put: function(num, length) {\r\n      for (var i = 0; i < length; i++) {\r\n        this.putBit(((num >>> (length - i - 1)) & 1) == 1);\r\n      }\r\n    },\r\n\r\n    getLengthInBits: function() {\r\n      return this.length;\r\n    },\r\n\r\n    putBit: function(bit) {\r\n\r\n      var bufIndex = Math.floor(this.length / 8);\r\n      if (this.buffer.length <= bufIndex) {\r\n        this.buffer.push(0);\r\n      }\r\n\r\n      if (bit) {\r\n        this.buffer[bufIndex] |= (0x80 >>> (this.length % 8));\r\n      }\r\n\r\n      this.length++;\r\n    }\r\n  };\r\n\r\n  //---------------------------------------------------------------------\r\n  // Support Chinese 字符编码支持中文\r\n  // 使用mode 4 8bit\r\n  //---------------------------------------------------------------------\r\n  function utf16To8(text) {\r\n    var result = '';\r\n    var c;\r\n    for (var i = 0; i < text.length; i++) {\r\n      c = text.charCodeAt(i);\r\n      if (c >= 0x0001 && c <= 0x007F) {\r\n        result += text.charAt(i);\r\n      } else if (c > 0x07FF) {\r\n        result += String.fromCharCode(0xE0 | c >> 12 & 0x0F);\r\n        result += String.fromCharCode(0x80 | c >> 6 & 0x3F);\r\n        result += String.fromCharCode(0x80 | c >> 0 & 0x3F);\r\n      } else {\r\n        result += String.fromCharCode(0xC0 | c >> 6 & 0x1F);\r\n        result += String.fromCharCode(0x80 | c >> 0 & 0x3F);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * 队列\r\n   */\r\n  class Queue {\r\n    constructor() {\r\n      let waitingQueue = [];\r\n      let isRunning = false; //记录是否有未完成的任务\r\n      function execute(task, resolve, reject) {\r\n        task()\r\n          .then((data) => {\r\n            resolve(data);\r\n          })\r\n          .catch((e) => {\r\n            reject(e);\r\n          })\r\n          .finally(() => {\r\n            //等待任务队列中如果有任务，则触发它；否则设置isRunning = false,表示无任务状态\r\n            if (waitingQueue.length) {\r\n              const next = waitingQueue.shift();\r\n              execute(next.task, next.resolve, next.reject);\r\n            } else {\r\n              isRunning = false;\r\n            }\r\n          });\r\n      }\r\n      return function(task) {\r\n        return new Promise((resolve, reject) => {\r\n          if (isRunning) {\r\n            waitingQueue.push({\r\n              task,\r\n              resolve,\r\n              reject\r\n            });\r\n          } else {\r\n            isRunning = true;\r\n            execute(task, resolve, reject);\r\n          }\r\n        });\r\n      };\r\n    }\r\n  }\r\n  // const queue = new Queue();\r\n  // queue(() => new Promise((resolve, reject) => {\r\n  //   setTimeout(() => {\r\n  //     resolve('task1');\r\n  //   }, 1000);\r\n  // })).then(data => console.log(data));\r\n  // queue(() => new Promise((resolve, reject) => {\r\n  //   setTimeout(() => {\r\n  //     resolve('task2');\r\n  //   }, 100);\r\n  // })).then(data => console.log(data));\r\n  // queue(() => new Promise((resolve, reject) => {\r\n  //   setTimeout(() => {\r\n  //     resolve('task3');\r\n  //   }, 300);\r\n  // })).then(data => console.log(data));\r\n\r\n  /**\r\n   * 纠错等级\r\n   */\r\n  uQRCode.errorCorrectLevel = QRErrorCorrectLevel;\r\n\r\n  /**\r\n   * 预设默认值（基本，不包含各部分和艺术码参数）\r\n   */\r\n  uQRCode.defaults = {\r\n    typeNumber: -1, // 版本，-1为自动计算，字符越多，版本越高\r\n    errorCorrectLevel: QRErrorCorrectLevel.H, // 纠错等级\r\n    text: '', // 二维码内容\r\n    size: 354, // 大小\r\n    useDynamicSize: false, // 使用动态尺寸，可以去掉方块小数点，绘制出来后没有白色细线\r\n    margin: 0, // 边距\r\n    background: {\r\n      color: '#FFFFFF' // 背景色\r\n    },\r\n    foreground: {\r\n      color: '#000000' // 前景色\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 对象属性深度替换\r\n   * @param {Object} o 原始对象/默认对象/被替换的对象\r\n   * @param {Object} r 从这个对象里取值替换到o对象里\r\n   * @return {Object} 替换后的新对象\r\n   */\r\n  uQRCode.deepReplace = function(o = {}, r = {}) {\r\n    let obj = {\r\n      ...o\r\n    }\r\n    for (let k in r) {\r\n      var vr = r[k];\r\n      if (vr.constructor == Object) {\r\n        obj[k] = this.deepReplace(obj[k], vr);\r\n      } else if (vr.constructor == String && !vr) {\r\n        obj[k] = obj[k];\r\n      } else {\r\n        obj[k] = vr;\r\n      }\r\n    }\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * 获取选项值\r\n   */\r\n  uQRCode.getOptions = function(options) {\r\n    options = uQRCode.deepReplace(uQRCode.defaults, options);\r\n\r\n    /* 背景 */\r\n    options.background = uQRCode.deepReplace({\r\n      color: options.background.color, // 背景色\r\n      image: {\r\n        src: '',\r\n        width: 1, // 图片宽\r\n        height: 1, // 图片高\r\n        align: ['center', 'center'], // 图片对齐方式水平，垂直\r\n        anchor: [0, 0], // 图片位置，X坐标，Y坐标\r\n        alpha: 1 // 透明度\r\n      }\r\n    }, options.background);\r\n    /* 前景 */\r\n    options.foreground = uQRCode.deepReplace({\r\n      color: options.foreground.color, // 前景色\r\n      image: {\r\n        src: '',\r\n        width: 1 / 4, // 图片宽\r\n        height: 1 / 4, // 图片高\r\n        align: ['center', 'center'], // 图片对齐方式水平，垂直\r\n        anchor: [0, 0] // 图片位置，X坐标，Y坐标\r\n      }\r\n    }, options.foreground);\r\n    /* 定位角 */\r\n    options.positionDetection = uQRCode.deepReplace({\r\n      backgroundColor: options.background.color, // 定位角区域背景色，默认值跟随背景色\r\n      foregroundColor: options.foreground.color // 定位角小块颜色，默认值跟随前景色\r\n    }, options.positionDetection);\r\n    /* 分割图案 */\r\n    options.separator = uQRCode.deepReplace({\r\n      color: options.background.color // 分割区域颜色，默认值跟随背景色\r\n    }, options.separator);\r\n    /* 对齐图案 */\r\n    options.alignment = uQRCode.deepReplace({\r\n      backgroundColor: options.background.color, // 对齐区域背景色，默认值跟随背景色\r\n      foregroundColor: options.foreground.color // 对齐小块颜色，默认值跟随前景色\r\n    }, options.alignment);\r\n    /* 时序图案 */\r\n    options.timing = uQRCode.deepReplace({\r\n      backgroundColor: options.background.color, // 时序区域背景色，默认值跟随背景色\r\n      foregroundColor: options.foreground.color // 时序小块颜色，默认值跟随前景色\r\n    }, options.timing);\r\n    /* 暗块 */\r\n    options.darkBlock = uQRCode.deepReplace({\r\n      color: options.foreground.color // 暗块颜色\r\n    }, options.darkBlock);\r\n    /* 版本信息 */\r\n    options.versionInformation = uQRCode.deepReplace({\r\n      backgroundColor: options.background.color, // 版本信息区域背景色，默认值跟随背景色\r\n      foregroundColor: options.foreground.color // 版本信息小块颜色，默认值跟随前景色\r\n    }, options.versionInformation);\r\n\r\n    return options;\r\n  }\r\n\r\n  /**\r\n   * 获取canvas实例\r\n   */\r\n  uQRCode.getCanvasContext = function(ctx) {\r\n    /* 兼容setFillStyle写法，主要在uni-app nvue gcanvas */\r\n    ctx.setFillStyle = ctx.setFillStyle || function(color) {\r\n      ctx.fillStyle = color;\r\n    }\r\n    /* 兼容setFontSize写法，主要在微信小程序canvas2d */\r\n    ctx.setFontSize = ctx.setFontSize || function(fontSize) {\r\n      ctx.font = `${fontSize}px`;\r\n    }\r\n    /* 兼容setTextAlign写法，主要在微信小程序canvas2d */\r\n    ctx.setTextAlign = ctx.setTextAlign || function(align) {\r\n      ctx.textAlign = align;\r\n    }\r\n    /* 兼容setTextBaseline写法，主要在微信小程序canvas2d */\r\n    ctx.setTextBaseline = ctx.setTextBaseline || function(textBaseline) {\r\n      ctx.textBaseline = textBaseline;\r\n    }\r\n    /* 若实例不包含draw方法则创建一个 */\r\n    ctx.draw = ctx.draw || function(reserve, callback) {\r\n      callback && callback();\r\n    }\r\n    return ctx;\r\n  }\r\n\r\n  /* 队列实例，某些平台一起使用多个组件时需要通过队列逐一绘制，否则部分绘制方法异常，nvue端的iOS gcanvas尤其明显，在不通过队列绘制时会出现图片丢失的情况 */\r\n  uQRCode.Queue = new Queue();\r\n  uQRCode.QueueLoadImage = new Queue();\r\n\r\n  /* 缓存loadImage图片 */\r\n  uQRCode.loadImageCache = [];\r\n\r\n  /**\r\n   * 获取加载图片方法\r\n   */\r\n  uQRCode.getLoadImage = function(loadImage) {\r\n    if (typeof loadImage == 'function') {\r\n      return function(src) {\r\n        /* 解决iOS APP||NVUE同时绘制多个二维码导致图片丢失需使用队列 */\r\n        return uQRCode.QueueLoadImage(() => new Promise((resolve, reject) => {\r\n          setTimeout(() => {\r\n            const cache = uQRCode.loadImageCache.find(x => x.src == src);\r\n            if (cache) {\r\n              resolve(cache.img);\r\n            } else {\r\n              loadImage(src).then(img => {\r\n                uQRCode.loadImageCache.push({\r\n                  src,\r\n                  img\r\n                });\r\n                resolve(img);\r\n              });\r\n            }\r\n          }, 150);\r\n        }));\r\n      }\r\n    } else {\r\n      return function(src) {\r\n        return Promise.resolve(src);\r\n      }\r\n    }\r\n  }\r\n\r\n  uQRCode.prototype = {\r\n    /**\r\n     * 实例化传入的选项值\r\n     */\r\n    options: {},\r\n\r\n    /**\r\n     * 画布实例\r\n     */\r\n    canvasContext: {},\r\n\r\n    /**\r\n     * 制作二维码全部数据\r\n     */\r\n    makeData: {},\r\n\r\n    /**\r\n     * 制作二维码主要模块数据，基于makeData的modules但数据格式不一致，这里的modules是定制过的\r\n     */\r\n    modules: [],\r\n\r\n    /**\r\n     * 模块数量\r\n     */\r\n    moduleCount: 0,\r\n\r\n    /**\r\n     * 获取制作二维码数据\r\n     */\r\n    getMakeData() {\r\n      let {\r\n        typeNumber,\r\n        errorCorrectLevel,\r\n        text\r\n      } = this.options;\r\n      var qrcode = new QRCode(typeNumber, errorCorrectLevel);\r\n      qrcode.addData(utf16To8(text.toString()));\r\n      qrcode.make();\r\n      return qrcode;\r\n    },\r\n\r\n    /**\r\n     * 制作二维码方法\r\n     */\r\n    make() {\r\n      let makeData = this.makeData = this.getMakeData();\r\n      this.modules = JSON.parse(JSON.stringify(makeData.modules));\r\n      this.moduleCount = makeData.moduleCount;\r\n      this.options.typeNumber = makeData.typeNumber;\r\n\r\n      /* 数据码 data */\r\n      this.paintData();\r\n      /* 定位图案 position detection */\r\n      this.paintPositionDetection();\r\n      /* 分隔图案 separator */\r\n      this.paintSeparator();\r\n      /* 对齐图案 alignment */\r\n      this.paintAlignment();\r\n      /* 时序图案 timing */\r\n      this.paintTiming();\r\n      /* 暗块 darkBlock */\r\n      this.paintDarkBlock();\r\n      /* 预留版本信息 version information */\r\n      this.paintVersionInformation();\r\n    },\r\n\r\n    paintData() {\r\n      let modules = this.modules;\r\n      let moduleCount = this.moduleCount;\r\n      let {\r\n        size,\r\n        margin,\r\n        background,\r\n        foreground,\r\n        useDynamicSize\r\n      } = this.options;\r\n\r\n      /* dynamicSize自动计算出最适合绘制的尺寸，并按这个尺寸去绘制，可以解决canvas绘制小块间产生白线的问题（其实就是小数点精度问题），useDynamicSize=false可以取消这个设定 */\r\n      // let dynamicSize = this.options.dynamicSize = Math.floor((size - margin * 2) / moduleCount) * moduleCount + margin * 2; // Math.floor向下取整缩放会模糊\r\n      let dynamicSize = this.options.dynamicSize = Math.ceil((size - margin * 2) / moduleCount) * moduleCount + margin * 2; // Math.ceil向上取整缩放效果比floor清晰\r\n      if (!useDynamicSize) {\r\n        dynamicSize = this.options.dynamicSize = size;\r\n      }\r\n      let tileSize = (dynamicSize - margin * 2) / moduleCount;\r\n\r\n      for (var rowI = 0; rowI < modules.length; rowI++) {\r\n        for (var colI = 0; colI < modules.length; colI++) {\r\n          var tile = modules[rowI][colI];\r\n          if (tile) {\r\n            modules[rowI][colI] = {\r\n              size: tileSize,\r\n              x: colI * tileSize + margin,\r\n              y: rowI * tileSize + margin,\r\n              type: ['foreground'],\r\n              color: foreground.color,\r\n              isBlack: true,\r\n              isDrawn: false\r\n            };\r\n          } else {\r\n            modules[rowI][colI] = {\r\n              size: tileSize,\r\n              x: colI * tileSize + margin,\r\n              y: rowI * tileSize + margin,\r\n              type: ['background'],\r\n              color: background.color,\r\n              isBlack: false,\r\n              isDrawn: false\r\n            };\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    paintPositionDetection() {\r\n      let modules = this.modules;\r\n      let size = this.moduleCount;\r\n      let {\r\n        positionDetection\r\n      } = this.options;\r\n\r\n      //1) 定义基础图形索引（左上角）x ,y,v\r\n      let basePart = [\r\n        [0, 0, 1],\r\n        [1, 0, 1],\r\n        [2, 0, 1],\r\n        [3, 0, 1],\r\n        [4, 0, 1],\r\n        [5, 0, 1],\r\n        [6, 0, 1],\r\n        [0, 1, 1],\r\n        [1, 1, 0],\r\n        [2, 1, 0],\r\n        [3, 1, 0],\r\n        [4, 1, 0],\r\n        [5, 1, 0],\r\n        [6, 1, 1],\r\n        [0, 2, 1],\r\n        [1, 2, 0],\r\n        [2, 2, 1],\r\n        [3, 2, 1],\r\n        [4, 2, 1],\r\n        [5, 2, 0],\r\n        [6, 2, 1],\r\n        [0, 3, 1],\r\n        [1, 3, 0],\r\n        [2, 3, 1],\r\n        [3, 3, 1],\r\n        [4, 3, 1],\r\n        [5, 3, 0],\r\n        [6, 3, 1],\r\n        [0, 4, 1],\r\n        [1, 4, 0],\r\n        [2, 4, 1],\r\n        [3, 4, 1],\r\n        [4, 4, 1],\r\n        [5, 4, 0],\r\n        [6, 4, 1],\r\n        [0, 5, 1],\r\n        [1, 5, 0],\r\n        [2, 5, 0],\r\n        [3, 5, 0],\r\n        [4, 5, 0],\r\n        [5, 5, 0],\r\n        [6, 5, 1],\r\n        [0, 6, 1],\r\n        [1, 6, 1],\r\n        [2, 6, 1],\r\n        [3, 6, 1],\r\n        [4, 6, 1],\r\n        [5, 6, 1],\r\n        [6, 6, 1]\r\n      ];\r\n      let disc = size - 7; //size -7\r\n      basePart.forEach(d => {\r\n        var ltItem = modules[d[0]][d[1]];\r\n        var rtItem = modules[d[0] + disc][d[1]];\r\n        var lbItem = modules[d[0]][d[1] + disc];\r\n        lbItem.type.push('positionDetection');\r\n        rtItem.type.push('positionDetection');\r\n        ltItem.type.push('positionDetection');\r\n        //绘制左上角\r\n        ltItem.color = d[2] == 1 ? positionDetection.foregroundColor : positionDetection.backgroundColor;\r\n        //绘制右\r\n        rtItem.color = d[2] == 1 ? positionDetection.foregroundColor : positionDetection.backgroundColor;\r\n        //绘制左\r\n        lbItem.color = d[2] == 1 ? positionDetection.foregroundColor : positionDetection.backgroundColor;\r\n      });\r\n    },\r\n\r\n    paintSeparator() {\r\n      let modules = this.modules;\r\n      let size = this.moduleCount;\r\n      let {\r\n        separator\r\n      } = this.options;\r\n\r\n      //1) 定义基础图形索引（左上角）\r\n      [\r\n        [7, 0],\r\n        [7, 1],\r\n        [7, 2],\r\n        [7, 3],\r\n        [7, 4],\r\n        [7, 5],\r\n        [7, 6],\r\n        [7, 7],\r\n        [0, 7],\r\n        [1, 7],\r\n        [2, 7],\r\n        [3, 7],\r\n        [4, 7],\r\n        [5, 7],\r\n        [6, 7]\r\n      ].forEach(d => {\r\n        var ltItem = modules[d[0]][d[1]];\r\n        var rtItem = modules[size - d[0] - 1][d[1]];\r\n        var lbItem = modules[d[0]][size - d[1] - 1];\r\n        lbItem.type.push('separator');\r\n        rtItem.type.push('separator');\r\n        ltItem.type.push('separator');\r\n        //绘制左上\r\n        ltItem.color = separator.color;\r\n        //绘制右\r\n        rtItem.color = separator.color;\r\n        //绘制左\r\n        lbItem.color = separator.color;\r\n      });\r\n    },\r\n\r\n    paintAlignment() {\r\n      let modules = this.modules;\r\n      let size = this.moduleCount;\r\n      let {\r\n        alignment,\r\n        typeNumber\r\n      } = this.options;\r\n\r\n      //不同版本的对齐图案组合位置\r\n      const ALIGNMENT_OF_VERSION = [\r\n        [],\r\n        [6, 18],\r\n        [6, 22],\r\n        [6, 26],\r\n        [6, 30],\r\n        [6, 34],\r\n        [6, 22, 38],\r\n        [6, 24, 42],\r\n        [6, 26, 46],\r\n        [6, 28, 50],\r\n        [6, 30, 54],\r\n        [6, 32, 58],\r\n        [6, 34, 62],\r\n        [6, 26, 46, 66],\r\n        [6, 26, 48, 70],\r\n        [6, 26, 50, 74],\r\n        [6, 30, 54, 78],\r\n        [6, 30, 56, 82],\r\n        [6, 30, 58, 86],\r\n        [6, 34, 62, 90],\r\n        [6, 28, 50, 72, 94],\r\n        [6, 26, 50, 74, 98],\r\n        [6, 30, 54, 78, 102],\r\n        [6, 28, 54, 80, 106],\r\n        [6, 32, 58, 84, 110],\r\n        [6, 30, 58, 86, 114],\r\n        [6, 34, 62, 90, 118],\r\n        [6, 26, 50, 74, 98, 122],\r\n        [6, 30, 54, 78, 102, 126],\r\n        [6, 26, 52, 78, 104, 130],\r\n        [6, 30, 56, 82, 108, 134],\r\n        [6, 34, 60, 86, 112, 138],\r\n        [6, 30, 58, 86, 114, 142],\r\n        [6, 34, 62, 90, 118, 146],\r\n        [6, 30, 54, 78, 102, 126, 150],\r\n        [6, 24, 50, 76, 102, 128, 154],\r\n        [6, 28, 54, 80, 106, 132, 158],\r\n        [6, 32, 58, 84, 110, 136, 162],\r\n        [6, 26, 54, 82, 110, 138, 166],\r\n        [6, 30, 58, 86, 114, 142, 170]\r\n      ];\r\n      // 对齐图案数量和中心位置根据版本定义\r\n      const alignments = ALIGNMENT_OF_VERSION[typeNumber - 1];\r\n      if (alignments) {\r\n        const calcMatrix = [\r\n          [-2, -2, 1],\r\n          [-1, -2, 1],\r\n          [0, -2, 1],\r\n          [1, -2, 1],\r\n          [2, -2, 1],\r\n          [-2, -1, 1],\r\n          [-1, -1, 0],\r\n          [0, -1, 0],\r\n          [1, -1, 0],\r\n          [2, -1, 1],\r\n          [-2, 0, 1],\r\n          [-1, 0, 0],\r\n          [0, 0, 1],\r\n          [1, 0, 0],\r\n          [2, 0, 1],\r\n          [-2, 1, 1],\r\n          [-1, 1, 0],\r\n          [0, 1, 0],\r\n          [1, 1, 0],\r\n          [2, 1, 1],\r\n          [-2, 2, 1],\r\n          [-1, 2, 1],\r\n          [0, 2, 1],\r\n          [1, 2, 1],\r\n          [2, 2, 1]\r\n        ];\r\n        const group_len = alignments.length;\r\n        for (let i = 0; i < group_len; i++) {\r\n          for (let j = 0; j < group_len; j++) {\r\n            //对齐图案不能污染 定位器和分隔器\r\n            let {\r\n              x,\r\n              y\r\n            } = {\r\n              x: alignments[i],\r\n              y: alignments[j]\r\n            };\r\n            if (!((x < 9 && y < 9) || (x > size - 9 - 1 && y < 9) || (y > size - 9 - 1 && x < 9))) {\r\n              calcMatrix.forEach(d => {\r\n                var alignmentItem = modules[x + d[0]][y + d[1]];\r\n                alignmentItem.type.push('alignment');\r\n                alignmentItem.color = d[2] == 1 ? alignment.foregroundColor : alignment.backgroundColor;\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    paintTiming() {\r\n      let modules = this.modules;\r\n      let {\r\n        timing\r\n      } = this.options;\r\n\r\n      let timingPartLen = modules.length - 16;\r\n      for (let i = 0; i < timingPartLen; i++) {\r\n        var xItem = modules[6][8 + i];\r\n        var yItem = modules[8 + i][6];\r\n        xItem.type.push('timing');\r\n        yItem.type.push('timing');\r\n        xItem.color = (1 & i) ^ 1 ? timing.foregroundColor : timing.backgroundColor;\r\n        yItem.color = (1 & i) ^ 1 ? timing.foregroundColor : timing.backgroundColor;\r\n      }\r\n    },\r\n\r\n    paintDarkBlock() {\r\n      let modules = this.modules;\r\n      let size = this.moduleCount;\r\n      let {\r\n        darkBlock\r\n      } = this.options;\r\n\r\n      //创建暗模块\r\n      var darkBlockItem = modules[size - 7 - 1][8];\r\n      darkBlockItem.type.push('darkBlock');\r\n      darkBlockItem.color = darkBlock.color;\r\n    },\r\n\r\n    paintVersionInformation() {\r\n      let modules = this.modules;\r\n      let size = this.moduleCount;\r\n      let {\r\n        versionInformation,\r\n        typeNumber: version\r\n      } = this.options;\r\n\r\n      if (version < 7) {\r\n        return modules;\r\n      }\r\n      //预留版本信息 0 为补位,预留版本信息 是从索引7开始\r\n      const VERSIONS = [\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        '000111110010010100',\r\n        '001000010110111100',\r\n        '001001101010011001',\r\n        '001010010011010011',\r\n        '001011101111110110',\r\n        '001100011101100010',\r\n        '001101100001000111',\r\n        '001110011000001101',\r\n        '001111100100101000',\r\n        '010000101101111000',\r\n        '010001010001011101',\r\n        '010010101000010111',\r\n        '010011010100110010',\r\n        '010100100110100110',\r\n        '010101011010000011',\r\n        '010110100011001001',\r\n        '010111011111101100',\r\n        '011000111011000100',\r\n        '011001000111100001',\r\n        '011010111110101011',\r\n        '011011000010001110',\r\n        '011100110000011010',\r\n        '011101001100111111',\r\n        '011110110101110101',\r\n        '011111001001010000',\r\n        '100000100111010101',\r\n        '100001011011110000',\r\n        '100010100010111010',\r\n        '100011011110011111',\r\n        '100100101100001011',\r\n        '100101010000101110',\r\n        '100110101001100100',\r\n        '100111010101000001',\r\n        '101000110001101001'\r\n      ];\r\n\r\n      //两种方式获取预留格式信息,临时计算或者查字典\r\n      //let version_codes = _v.correctVersionData(_v.version);\r\n      let version_codes = VERSIONS[version] + VERSIONS[version];\r\n      //创建预留版本信息\r\n      let disc = [size - 11, size - 10, size - 9];\r\n      // 左+右\r\n      let version_cells = [\r\n        //左\r\n        [5, disc[2]],\r\n        [5, disc[1]],\r\n        [5, disc[0]],\r\n        [4, disc[2]],\r\n        [4, disc[1]],\r\n        [4, disc[0]],\r\n        [3, disc[2]],\r\n        [3, disc[1]],\r\n        [3, disc[0]],\r\n        [2, disc[2]],\r\n        [2, disc[1]],\r\n        [2, disc[0]],\r\n        [1, disc[2]],\r\n        [1, disc[1]],\r\n        [1, disc[0]],\r\n        [0, disc[2]],\r\n        [0, disc[1]],\r\n        [0, disc[0]],\r\n        //右\r\n        [disc[2], 5],\r\n        [disc[1], 5],\r\n        [disc[0], 5],\r\n        [disc[2], 4],\r\n        [disc[1], 4],\r\n        [disc[0], 4],\r\n        [disc[2], 3],\r\n        [disc[1], 3],\r\n        [disc[0], 3],\r\n        [disc[2], 2],\r\n        [disc[1], 2],\r\n        [disc[0], 2],\r\n        [disc[2], 1],\r\n        [disc[1], 1],\r\n        [disc[0], 1],\r\n        [disc[2], 0],\r\n        [disc[1], 0],\r\n        [disc[0], 0]\r\n      ];\r\n      version_cells.forEach((d, index) => {\r\n        var versionInformationItem = modules[d[0]][d[1]];\r\n        versionInformationItem.type.push('versionInformation');\r\n        versionInformationItem.color = version_codes[index] == '1' ? versionInformation.foregroundColor : versionInformation.backgroundColor;\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 绘制二维码方法\r\n     */\r\n    draw(options) {\r\n      options = uQRCode.deepReplace({\r\n        drawBackground: {\r\n          before: () => {},\r\n          after: () => {}\r\n        },\r\n        drawBackgroundImage: {\r\n          before: () => {},\r\n          after: () => {}\r\n        },\r\n        drawForeground: {\r\n          before: () => {},\r\n          after: () => {}\r\n        },\r\n        drawForegroundImage: {\r\n          before: () => {},\r\n          after: () => {}\r\n        }\r\n      }, options);\r\n\r\n      /* 绘制层级关系，最底层背景 -> 背景图片 -> 前景 -> 最顶层前景图片 */\r\n      return new Promise((resolve, reject) => {\r\n        let ctx = this.canvasContext;\r\n\r\n        const startup = () => {\r\n          /* 同时绘制多个二维码时使用队列绘制，防止内部方法冲突导致绘制失败 */\r\n          return uQRCode.Queue(() => new Promise((queueResolve, queueReject) => {\r\n            setTimeout(() => {\r\n              ctx.draw(false); // 第一个draw false可以清空画布\r\n              queueResolve();\r\n            }, 150);\r\n          }));\r\n        }\r\n        startup()\r\n          .then(() => {\r\n            /* 绘制背景 */\r\n            return this.drawBackground({\r\n              before: options.drawBackground.before,\r\n              after: options.drawBackground.after\r\n            });\r\n          })\r\n          .then(() => {\r\n            /* 绘制背景图片 */\r\n            return this.drawBackgroundImage({\r\n              before: options.drawBackgroundImage.before,\r\n              after: options.drawBackgroundImage.after\r\n            });\r\n          })\r\n          .then(() => {\r\n            /* 绘制前景 */\r\n            return this.drawForeground({\r\n              before: options.drawForeground.before,\r\n              after: options.drawForeground.after\r\n            });\r\n          })\r\n          .then(() => {\r\n            /* 绘制前景图片 */\r\n            return this.drawForegroundImage({\r\n              before: options.drawForegroundImage.before,\r\n              after: options.drawForegroundImage.after\r\n            });\r\n          })\r\n          .then(() => {\r\n            /* 完成绘制 */\r\n            resolve();\r\n          });\r\n      });\r\n    },\r\n\r\n    drawBackground({\r\n      before,\r\n      after\r\n    }) {\r\n      let {\r\n        dynamicSize: size,\r\n        background\r\n      } = this.options;\r\n      let ctx = this.canvasContext;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        (async () => {\r\n          await before(this);\r\n\r\n          ctx.save();\r\n          /* 填充背景色 */\r\n          ctx.setFillStyle(background.color);\r\n          ctx.fillRect(0, 0, size, size);\r\n          ctx.restore();\r\n          ctx.draw(true); // gcanvas需要每一阶段都draw一下，否则重绘有问题，例如uni-app nvue绘制图片会失败\r\n\r\n          await after(this);\r\n          resolve();\r\n        })();\r\n      });\r\n    },\r\n\r\n    drawBackgroundImage({\r\n      before,\r\n      after\r\n    }) {\r\n      let {\r\n        dynamicSize: size,\r\n        background\r\n      } = this.options;\r\n      let ctx = this.canvasContext;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        (async () => {\r\n          await before(this);\r\n\r\n          if (background.image.src) {\r\n            ctx.save();\r\n\r\n            let x = 0;\r\n            let y = 0;\r\n\r\n            let w = background.image.width * size;\r\n            let h = background.image.height * size;\r\n            let align = background.image.align;\r\n            let anchor = background.image.anchor;\r\n            let alpha = background.image.alpha;\r\n\r\n            switch (align[0]) {\r\n              case 'left':\r\n                x = 0;\r\n                break;\r\n              case 'center':\r\n                x = size / 2 - w / 2;\r\n                break;\r\n              case 'right':\r\n                x = size - w;\r\n                break;\r\n            }\r\n            x += Number(anchor[0]);\r\n\r\n            switch (align[1]) {\r\n              case 'top':\r\n                y = 0;\r\n                break;\r\n              case 'center':\r\n                y = size / 2 - h / 2;\r\n                break;\r\n              case 'bottom':\r\n                y = size - h;\r\n                break;\r\n            }\r\n            y += Number(anchor[1]);\r\n\r\n            /* 设置透明度 */\r\n            ctx.globalAlpha = alpha;\r\n\r\n            /* 绘制图片 */\r\n            const img = await this.loadImage(background.image.src);\r\n            ctx.drawImage(img, x, y, w, h);\r\n            ctx.restore();\r\n            ctx.draw(true); // gcanvas需要每一阶段都draw一下，否则重绘有问题，例如uni-app nvue绘制图片会失败\r\n          }\r\n\r\n          await after(this);\r\n          resolve();\r\n        })();\r\n      });\r\n    },\r\n\r\n    drawForeground({\r\n      before,\r\n      after\r\n    }) {\r\n      let {\r\n        background\r\n      } = this.options;\r\n      let modules = this.modules;\r\n      let moduleCount = this.moduleCount;\r\n      let ctx = this.canvasContext;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        (async () => {\r\n          await before(this);\r\n\r\n          ctx.save();\r\n          for (var rowI = 0; rowI < moduleCount; rowI++) {\r\n            for (var colI = 0; colI < moduleCount; colI++) {\r\n              var tile = modules[rowI][colI];\r\n              if (!tile.isDrawn && tile.color != background.color) { // 颜色不能与背景色一致，否则可能发生颜色重叠\r\n                var color = tile.color;\r\n                ctx.setFillStyle(color);\r\n                ctx.fillRect(tile.x, tile.y, tile.size, tile.size);\r\n                tile.isDrawn = true;\r\n              }\r\n            }\r\n          }\r\n          ctx.restore();\r\n          ctx.draw(true); // gcanvas需要每一阶段都draw一下，否则重绘有问题，例如uni-app nvue绘制图片会失败\r\n\r\n          await after(this);\r\n          resolve();\r\n        })();\r\n      });\r\n    },\r\n\r\n    drawForegroundImage({\r\n      before,\r\n      after\r\n    }) {\r\n      let {\r\n        dynamicSize: size,\r\n        foreground\r\n      } = this.options;\r\n      let ctx = this.canvasContext;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        (async () => {\r\n          await before(this);\r\n\r\n          if (foreground.image.src) {\r\n            ctx.save();\r\n\r\n            // 绘制前景图\r\n            let x = 0;\r\n            let y = 0;\r\n\r\n            let w = foreground.image.width * size;\r\n            let h = foreground.image.height * size;\r\n            let align = foreground.image.align;\r\n            let anchor = foreground.image.anchor;\r\n            let alpha = foreground.image.alpha;\r\n            let shadow = foreground.image.shadow;\r\n            let border = foreground.image.border;\r\n\r\n            switch (align[0]) {\r\n              case 'left':\r\n                x = 0;\r\n                break;\r\n              case 'center':\r\n                x = size / 2 - w / 2;\r\n                break;\r\n              case 'right':\r\n                x = size - w;\r\n                break;\r\n            }\r\n            x += Number(anchor[0]);\r\n\r\n            switch (align[1]) {\r\n              case 'top':\r\n                y = 0;\r\n                break;\r\n              case 'center':\r\n                y = size / 2 - h / 2;\r\n                break;\r\n              case 'bottom':\r\n                y = size - h;\r\n                break;\r\n            }\r\n            y += Number(anchor[1]);\r\n\r\n            /* 绘制图片 */\r\n            const img = await this.loadImage(foreground.image.src);\r\n            ctx.drawImage(img, x, y, w, h);\r\n            ctx.restore();\r\n            ctx.draw(true); // gcanvas需要每一阶段都draw一下，否则重绘有问题，例如uni-app nvue绘制图片会失败\r\n          }\r\n\r\n          await after(this);\r\n          resolve();\r\n        })();\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\r\nexport default uQRCode;\r\n","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}\nmodule.exports = _toArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"],"sourceRoot":""}