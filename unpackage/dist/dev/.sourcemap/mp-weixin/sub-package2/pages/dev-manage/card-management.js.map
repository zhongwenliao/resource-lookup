{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Project/resource-lookup/sub-package2/pages/dev-manage/card-management.vue?d4f3","webpack:///D:/Project/resource-lookup/sub-package2/pages/dev-manage/card-management.vue?3fa1","webpack:///D:/Project/resource-lookup/sub-package2/pages/dev-manage/card-management.vue?7d82","webpack:///D:/Project/resource-lookup/sub-package2/pages/dev-manage/card-management.vue?8e8c","uni-app:///sub-package2/pages/dev-manage/card-management.vue","webpack:///D:/Project/resource-lookup/sub-package2/pages/dev-manage/card-management.vue?772d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniBasePage","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","devObj","deleteCardList","addCardList","cardNo","cardNum","exitBthShow1","exitBthShow2","timer","swipe_card_add","swipe_card_add_tips","swipe_card_delete","swipe_card_delete_tips","input_card_add","input_card_add_tips","input_card_delete","input_card_delete_tips","computed","manage","sdk","mine","onLoad","methods","syncServerCardData","that","Promise","setTimeout","postCardList","url","cardNos","devSn","isShowLoad","success","getDeleteCard","resolve","getAddCard","swipeCardAdd","swipeCardDelete","exitCardAdd","exitCardDelete","goToInputCard","uni","getReadCardList","cleanFingerprint","cleanCard"],"mappings":"wKAAA,MAE4D,MAC5D,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,oDACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,YAAa,WACX,OAAO,uEAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCjCvB,yHAAoqB,eAAG,G,sHCiEvqB,CACAC,gBACA,OACAC,UACAC,kBACAC,eACAC,UACAC,WACAC,gBACAC,gBACAC,WACAC,kBACAC,uBACAC,qBACAC,0BACAC,kBACAC,uBACAC,qBACAC,4BAIAC,UACAC,kBACA,0BAEAC,eACA,uBAEAC,gBACA,yBAIAC,mBACA,kDACA,WACA,iCACA,sCACA,uEACA,uFACA,6EACA,6FACA,yEACA,qFACA,+EACA,6FAEA,4DACA,2EACA,kEACA,iFACA,4DACA,yEACA,kEACA,kFAKAC,SAEAC,8BACA,WACAC,eAEAC,kEACA,eACA,2DACAD,yDAAA,oBAEA,qDACAA,mDAAA,oBAGA,2BACA,0BACA,6BACA,WACAA,kDACA,UAEAA,4DACAA,gDAEA,UAEAA,8CACAA,mDAEA,UAEAA,8CACAA,eACAE,uBACAF,4DACA,6CACAA,sCAEA,YAMAG,2BAAA,WACA,mBACAC,6CACA5B,MACA6B,UACAC,QACAC,eAEAC,oBACA,UACA,0DAEA,wBAMAC,yBAAA,WACA,kCACA,gBACAL,wDACA5B,MACA8B,sBAEAE,oBACAE,GAAA,+BAOAC,sBAAA,WACA,kCACA,gBACAP,wDACA5B,MACA8B,sBAEAE,oBACAE,GAAA,4BAQAE,wBAAA,WACA,6BAEA,yDACA,iBACA,6DACA,sBAGA,8BAEA,yDACA,oBACA,eACA,wCAMAC,2BAAA,WACA,6BAEA,4DACA,gEACA,qBAEA,+BACA,qBAEA,yDACA,oBACA,uCAOAC,uBAAA,WACA,8DACA,iBACA,8DACA,uBAMAC,0BAAA,WACA,iEACA,iBACA,iEACA,uBAMAC,0BACAC,cACAb,mEAKAc,2BAAA,WACA,gEACA,oBACA,iBACA,KACA,wCAEAD,cACAb,iGAOAe,4BAAA,WACA,yDACA,+BAIAC,qBACA,wCAMA,c,6DCzTA,yHAAu8B,eAAG,G","file":"sub-package2/pages/dev-manage/card-management.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;;import '@dcloudio/vue-cli-plugin-uni/packages/uni-push/dist/uni-push.es.js';\nimport Vue from 'vue'\nimport Page from './sub-package2/pages/dev-manage/card-management.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./card-management.vue?vue&type=template&id=5bc91ff1&\"\nvar renderjs\nimport script from \"./card-management.vue?vue&type=script&lang=js&\"\nexport * from \"./card-management.vue?vue&type=script&lang=js&\"\nimport style0 from \"./card-management.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"sub-package2/pages/dev-manage/card-management.vue\"\nexport default component.exports","export * from \"-!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./card-management.vue?vue&type=template&id=5bc91ff1&\"","var components\ntry {\n  components = {\n    uniBasePage: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-base-page/uni-base-page\" */ \"@/components/uni-base-page/uni-base-page.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./card-management.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./card-management.vue?vue&type=script&lang=js&\"","<template>\r\n\t<uni-base-page class=\"uni-base-page\">\r\n\t\t<view class=\"pages-container\">\r\n\t\t\t<view class=\"card-box-view\">\r\n\t\t\t\t<button class=\"card-view\" @click=\"syncServerCardData\">\r\n\t\t\t\t\t<text class=\"operation-title\">{{ manage[\"sync-server-data\"] || \"同步服务器卡数据\" }}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"operation-instruction\">{{  manage[\"sync-card-data-tips\"] || \"从服务器获取卡号，进行批量删卡添卡操作，此过程可能耗时较长\" }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"card-box-view\" v-if=\"devObj.btCardAddType !== 0\">\r\n\t\t\t\t<button class=\"card-view\" @click=\"swipeCardAdd\">\r\n\t\t\t\t\t<text class=\"operation-title\" v-if=\"devObj.deviceModelName === 'M160'\">{{ manage[\"swipe-to-report-loss\"] || \"刷卡挂失\" }}</text>\r\n\t\t\t\t\t<text class=\"operation-title\" v-else>{{ swipe_card_add }}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class=\"exit-btn\" @click=\"exitCardAdd\" v-if=\"exitBthShow1\">\r\n\t\t\t\t\t<text class=\"operation-title\">{{ mine[\"logout\"] || \"退出\" }}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"operation-instruction\">{{ swipe_card_add_tips }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"card-box-view\" v-if=\"devObj.btCardAddType !== 0\">\r\n\t\t\t\t<button class=\"card-view\" @click=\"swipeCardDelete\">\r\n\t\t\t\t\t<text class=\"operation-title\" v-if=\"devObj.deviceModelName === 'M160'\">{{ manage[\"swipe-to-unlock\"] || \"刷卡解挂\" }}</text>\r\n\t\t\t\t\t<text class=\"operation-title\">{{ swipe_card_delete }}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class=\"exit-btn\" @click=\"exitCardDelete\" v-if=\"exitBthShow2\">\r\n\t\t\t\t\t<text class=\"operation-title\">{{ mine[\"logout\"] || \"退出\" }}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"operation-instruction\">{{ swipe_card_delete_tips }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"card-box-view\">\r\n\t\t\t\t<button class=\"card-view\" @click=\"goToInputCard(0)\">\r\n\t\t\t\t\t<text class=\"operation-title\">{{ input_card_add}}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"operation-instruction\">{{ input_card_add_tips }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"card-box-view\">\r\n\t\t\t\t<button class=\"card-view\" @click=\"goToInputCard(1)\">\r\n\t\t\t\t\t<text class=\"operation-title\">{{ input_card_delete }}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"operation-instruction\">{{ input_card_delete_tips }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"card-box-view\">\r\n\t\t\t\t<button class=\"card-view\" @click=\"cleanCard\">\r\n\t\t\t\t\t<text class=\"operation-title\">{{ manage[\"clean-card\"] || \"清空设备卡数据\" }}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"operation-instruction\">{{ manage[\"clean-card-tips\"] || \"删除设备所有卡号\" }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"devObj.isSupportFingerprint === 1\" class=\"card-box-view\">\r\n\t\t\t\t<button class=\"card-view\" @click=\"cleanFingerprint\">\r\n\t\t\t\t\t<text class=\"operation-title\">{{ manage[\"clean-fingerprint\"] || \"清空设备指纹数据\" }}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"operation-instruction\">{{ manage[\"clean-fingerprint-tips\"] || \"删除设备所有指纹数据\" }}</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"card-box-view\">\r\n\t\t\t\t<button class=\"card-view\" @click=\"getReadCardList\">\r\n\t\t\t\t\t<text class=\"operation-title\">{{ manage[\"read-card-list\"] || \"读取设备卡列表\" }}</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"operation-instruction\">{{ manage[\"read-card-list-tips\"] || \"读取设备上已有卡，此过程耗时较长\" }}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</uni-base-page>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata () {\r\n\t\t\treturn {\r\n\t\t\t\tdevObj: {},\r\n\t\t\t\tdeleteCardList: [],\r\n\t\t\t\taddCardList: [],\r\n\t\t\t\tcardNo: [],\r\n\t\t\t\tcardNum: \"\",\r\n\t\t\t\texitBthShow1: false,\r\n\t\t\t\texitBthShow2: false,\r\n\t\t\t\ttimer: null,\r\n\t\t\t\tswipe_card_add: \"\",\r\n\t\t\t\tswipe_card_add_tips: \"\",\r\n\t\t\t\tswipe_card_delete: \"\",\r\n\t\t\t\tswipe_card_delete_tips: \"\",\r\n\t\t\t\tinput_card_add: \"\",\r\n\t\t\t\tinput_card_add_tips: \"\",\r\n\t\t\t\tinput_card_delete: \"\",\r\n\t\t\t\tinput_card_delete_tips: \"\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tcomputed: {\r\n\t\t\tmanage() {\r\n\t\t\t\treturn this.$t(\"manage\");\r\n\t\t\t},\r\n\t\t\tsdk() {\r\n\t\t\t\treturn this.$t(\"sdk\");\r\n\t\t\t},\r\n\t\t\tmine() {\r\n\t\t\t\treturn this.$t(\"mine\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonLoad(options) {\r\n\t\t\tthis.$setTitle(this.manage[\"card-manage\"] || \"卡管理\")\r\n\t\t\tif(options.devObj) {\r\n\t\t\t\tthis.devObj = JSON.parse(options.devObj);\r\n\t\t\t\tif( this.devObj.isBtCardAddBlacklist === 1 ) {\r\n\t\t\t\t\tthis.swipe_card_add = this.manage['swipe-card-add-blacklist'] || \"刷卡添加黑名单\";\r\n\t\t\t\t\tthis.swipe_card_add_tips = this.manage['swipe-card-add-tips-blacklist'] || \"刷卡进行读取卡号添加黑名单\";\r\n\t\t\t\t\tthis.swipe_card_delete = this.manage['swipe-card-delete-blacklist'] || \"刷卡删除黑名单\";\r\n\t\t\t\t\tthis.swipe_card_delete_tips = this.manage['swipe-card-delete-tips-blacklist'] || \"刷卡进行读取卡号删除黑名单\";\r\n\t\t\t\t\tthis.input_card_add = this.manage['input-card-add-blacklist'] || \"输入卡号加入黑名单\";\r\n\t\t\t\t\tthis.input_card_add_tips = this.manage['input-card-add-tips-blacklist'] || \"手动输入卡号添加黑名单\";\r\n\t\t\t\t\tthis.input_card_delete = this.manage['input-card-delete-blacklist'] || \"输入卡号移除黑名单\";\r\n\t\t\t\t\tthis.input_card_delete_tips = this.manage['input-card-delete-tips-blacklist'] || \"手动输入卡号删除黑名单\";\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.swipe_card_add = this.manage['swipe-card-add'] || \"刷卡添加卡号\";\r\n\t\t\t\t\tthis.swipe_card_add_tips = this.manage['swipe-card-add-tips'] || \"刷卡进行读取卡号添加卡\";\r\n\t\t\t\t\tthis.swipe_card_delete = this.manage['swipe-card-delete'] || \"刷卡删除卡号\";\r\n\t\t\t\t\tthis.swipe_card_delete_tips = this.manage['swipe-card-delete-tips'] || \"刷卡进行读取卡号删除卡\";\r\n\t\t\t\t\tthis.input_card_add = this.manage['input-card-add'] || \"输入卡号添卡\";\r\n\t\t\t\t\tthis.input_card_add_tips = this.manage['input-card-add-tips'] || \"手动输入卡号添加卡\";\r\n\t\t\t\t\tthis.input_card_delete = this.manage['input-card-delete'] || \"输入卡号删卡\";\r\n\t\t\t\t\tthis.input_card_delete_tips = this.manage['input-card-delete-tips'] || \"手动输入卡号删除卡\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tmethods: {\r\n\t\t\t//同步服务器卡数据\r\n\t\t\tsyncServerCardData() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.$showToast()\r\n\t\t\t\t//请求要删除和要添加的卡\r\n\t\t\t\tPromise.all([that.getDeleteCard(), that.getAddCard()]).then((resultList) => {\r\n\t\t\t\t\tfor (let i in resultList) {\r\n\t\t\t\t\t\tif ((\"deleteCardData\" in resultList[i]) && (resultList[i][\"deleteCardData\"].length > 0)) {\r\n\t\t\t\t\t\t\tthat.deleteCardList = resultList[i][\"deleteCardData\"].map(item => item.cardNo);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((\"addCardData\" in resultList[i]) && (resultList[i][\"addCardData\"].length > 0)) {\r\n\t\t\t\t\t\t\tthat.addCardList = resultList[i][\"addCardData\"].map(item => item.cardNo);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet needAdd = that.addCardList.length;\r\n\t\t\t\t\tlet needDelete = that.deleteCardList.length;\r\n\t\t\t\t\tlet deleteCardListStr = that.deleteCardList.join(\",\");\r\n\t\t\t\t\tif (needDelete == 0 && needAdd == 0) {\r\n\t\t\t\t\t\tthat.$showToast( that.manage[\"no-update-data\"] || \"无更新数据\");\r\n\t\t\t\t\t} else if (needDelete == 0 && needAdd > 0) {\r\n\t\t\t\t\t\t//只需要导卡\r\n\t\t\t\t\t\tthat.$sdkUtil.writeCard(that.devObj, that.addCardList, true, (result) => {\r\n\t\t\t\t\t\t\tthat.postCardList(that.addCardList, that.devObj.devSn);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (needDelete > 0 && needAdd == 0) {\r\n\t\t\t\t\t\t//只需要删卡\r\n\t\t\t\t\t\tthat.$sdkUtil.deleteCard(that.devObj, deleteCardListStr, (result) => {\r\n\t\t\t\t\t\t\tthat.postCardList(that.deleteCardList, that.devObj.devSn);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (needDelete > 0 && needAdd > 0) { \r\n\t\t\t\t\t\t//先删卡后导卡\r\n\t\t\t\t\t\tthat.$sdkUtil.deleteCard(that.devObj, deleteCardListStr, (result) => {\r\n\t\t\t\t\t\t\tthat.$showToast()\r\n\t\t\t\t\t\t\tsetTimeout(()=> {\r\n\t\t\t\t\t\t\t\tthat.$sdkUtil.writeCard(that.devObj, that.addCardList, true, (res) => {\r\n\t\t\t\t\t\t\t\t\tlet cardList = that.addCardList.concat(that.deleteCardList);\r\n\t\t\t\t\t\t\t\t\tthat.postCardList(cardList, that.devObj.devSn);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, 3000)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//操作完成后将卡号传给服务器\r\n\t\t\tpostCardList(cardList, devSn) {\r\n\t\t\t\tthis.$req.request ({\r\n\t\t\t\t\turl: \"/persOfflineCard/app/operationComplete\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tcardNos: cardList,\r\n\t\t\t\t\t\tdevSn: devSn,\r\n\t\t\t\t\t\tisShowLoad: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif(res.code == 0) {\r\n\t\t\t\t\t\t\tthis.$showToast(this.manage[\"sync-card-success\"] || \"同步服务器卡数据成功\");\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tthis.$showToast( res.mag );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取要删除的卡\r\n\t\t\tgetDeleteCard() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tthis.$req.request({\r\n\t\t\t\t\t\turl: \"/persOfflineCard/app/getNeedDelOfflineCardByDevSn\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tdevSn: this.devObj.devSn\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tresolve({\"deleteCardData\": res.data});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//获取要新增的卡\r\n\t\t\tgetAddCard() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tthis.$req.request({\r\n\t\t\t\t\t\turl: \"/persOfflineCard/app/getNeedAddOfflineCardByDevSn\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tdevSn: this.devObj.devSn\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tresolve({\"addCardData\": res.data});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//刷卡添加卡号\r\n\t\t\tswipeCardAdd() {\r\n\t\t\t\tif(this.devObj.btCardAddType == 1) {\r\n\t\t\t\t\t//调用旧方法\r\n\t\t\t\t\tthis.$sdkUtil.swipeAddCardModel(this.devObj, (result) => {\r\n\t\t\t\t\t\tif (result.errorCode == 0) {\r\n\t\t\t\t\t\t\tthis.$showToast( this.sdk[\"swipe-add-card-model\"] || \"已进入刷卡添卡模式，请刷卡\");\r\n\t\t\t\t\t\t\tthis.exitBthShow1 = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (this.devObj.btCardAddType == 2) {\r\n\t\t\t\t\t//调用新方法\r\n\t\t\t\t\tthis.$sdkUtil.getSwipeAddCardno(this.devObj, (result) => {\r\n\t\t\t\t\t\tlet cardNo = result.data.cardNo;\r\n\t\t\t\t\t\tlet cardArray = cardNo.split(\",\");\r\n\t\t\t\t\t\tthis.$sdkUtil.writeCard(this.devObj, cardArray, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//刷卡删除卡号\r\n\t\t\tswipeCardDelete() {\r\n\t\t\t\tif(this.devObj.btCardAddType == 1) {\r\n\t\t\t\t\t//调用旧方法\r\n\t\t\t\t\tthis.$sdkUtil.swipeCardDeleteModel(this.devObj, (result) => {\r\n\t\t\t\t\t\tthis.$showToast(this.sdk[\"swipe-delete-card-model\"] || \"已进入刷卡删卡模式，请刷卡\");\r\n\t\t\t\t\t\tthis.exitBthShow2 = true;\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (this.devObj.btCardAddType == 2) {\r\n\t\t\t\t\tthis.$showLog(\"新方法\");\r\n\t\t\t\t\t//调用新方法\r\n\t\t\t\t\tthis.$sdkUtil.getSwipeAddCardno(this.devObj, (result) => {\r\n\t\t\t\t\t\tlet cardNo = result.data.cardNo;\r\n\t\t\t\t\t\tthis.$sdkUtil.deleteCard(this.devObj, cardNo);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//退出刷卡添加卡号模式\r\n\t\t\texitCardAdd() {\r\n\t\t\t\tthis.$sdkUtil.existSwipeCardAddModel(this.devObj, (result) => {\r\n\t\t\t\t\tif(result.errorCode == 0) {\r\n\t\t\t\t\t\tthis.$showToast(this.sdk[\"exit-swipe-add-card-model\"] || \"已退出刷卡添卡模式\");\r\n\t\t\t\t\t\tthis.exitBthShow1 = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//退出刷卡删除卡号模式\r\n\t\t\texitCardDelete() {\r\n\t\t\t\tthis.$sdkUtil.existSwipeCardDeleteModel(this.devObj, (result) => {\r\n\t\t\t\t\tif(result.errorCode == 0) {\r\n\t\t\t\t\t\tthis.$showToast(this.sdk[\"exit-swipe-delete-card-model\"] || \"已退出刷卡删卡模式\");\r\n\t\t\t\t\t\tthis.exitBthShow2 = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//跳转到输入卡号页面,type为0为添加卡，type为1为删卡\r\n\t\t\tgoToInputCard(type) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"input-card?devObj=\" + JSON.stringify(this.devObj) + \"&type=\" + type\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//读取设备卡号\r\n\t\t\tgetReadCardList() {\r\n\t\t\t\tthis.$sdkUtil.getCardNumbersFromDevice(this.devObj, (result) => {\r\n\t\t\t\t\tlet cardNo = result.data.cardNo;\r\n\t\t\t\t\tlet cardNum = result.data.cardNum;\r\n\t\t\t\t\tif(cardNum == 0) {\r\n\t\t\t\t\t\tthis.$showToast( this.sdk[\"no-card\"] || \"暂无卡数据\");\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: \"../../sub-package/pages/dev-manage/card-list?cardNum=\" + cardNum + \"&cardNo=\" + JSON.stringify(cardNo)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//清空所有指纹数据\r\n\t\t\tcleanFingerprint() {\r\n\t\t\t\tthis.$sdkUtil.cleanFingerprints(this.devObj, (res) => {\r\n\t\t\t\t\tthis.$showToast(\"清空所有指纹数据成功\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//清除所有卡数据\r\n\t\t\tcleanCard() {\r\n\t\t\t\tthis.$sdkUtil.cleanCard(this.devObj);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.pages-container {\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tmargin: 0 40upx;\r\n\t\twidth: auto;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.card-box-view {\r\n\t\tmargin: 40upx 0;\r\n\t}\r\n\t\r\n\t.card-view {\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #1E90FF;\r\n\t\tcolor: #FFFFFF;\r\n\t\tpadding: 0 40upx;\r\n\t\tborder-radius: 25upx;\r\n\t}\r\n\t\r\n\t.exit-btn {\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #ff4040;\r\n\t\tcolor: #FFFFFF;\r\n\t\tmargin: 10upx auto;\r\n\t\tborder-radius: 25upx;\r\n\t}\r\n\t\r\n\t.card-view-border-bottom {\r\n\t\tborder-bottom: 1upx solid #1E90FF;\r\n\t}\r\n\t\r\n\t.operation-title {\r\n\t\tfont-size: 32upx;\r\n\t\tcolor: #FFFFFF;\r\n\t}\r\n\t\r\n\t.operation-instruction {\r\n\t\tfont-size: 24upx;\r\n\t\tcolor: #AAAAAA;\r\n\t\tpadding: 8upx;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./card-management.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../常用软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./card-management.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}