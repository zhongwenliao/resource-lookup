(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/employeeManagement/departmentDetails"],{"371f":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{id:0,zoneId:0,form:{roleName:""},noCheckStyle:{backgroundColor:" #F1F2F3",color:"#666666"},checkStyle:{backgroundColor:"#3E76F4",color:"white"},list:[],checkList:[],checkedAll:!1,num:0,rules:{roleName:[{required:!0,message:"请输入部门名称",trigger:["blur"]}]}}},onLoad:function(){this.zoneId=e.getStorageSync("zoneInfo").zoneId,this.roleMenuList(),this.id=this.$Route.query.id,this.id>0&&this.getDepartmentInfo(this.id)},onReady:function(){this.$refs.uForm.setRules(this.rules)},methods:{roleMenuList:function(){var e=this;this.zoneId;this.$api("employeeManagement.roleMenuList",{menuType:2,zoneId:this.zoneId}).then((function(n){200==n.code?(e.list=n.data.filter((function(e){return e.childMenu.length>0})),e.list.forEach((function(e){e.checked=!1,e.hidden=!1,e.childMenu.length>0&&e.childMenu.forEach((function(e){e.checked=!1}))}))):e.$refs.uToast.show({title:n.msg,type:"error"})})).catch((function(n){e.$refs.uToast.show({title:"获取失败",type:"error"})}))},getDepartmentInfo:function(e){var n=this;this.$api("employeeManagement.departmentInfo",{id:e}).then((function(e){200==e.code&&(n.form=e.data,n.checkList=n.form.menuId,n.list.forEach((function(e){e.childMenu.forEach((function(e){n.checkList.some((function(n){return n==e.id}))&&(e.checked=!0),n.num=n.num+1})),0===e.childMenu.filter((function(e){return!0===e.checked})).length?e.checked=!1:e.childMenu.length>0&&(e.checked=!0)})),n.checkedAll=n.num===n.checkList.length)}))},checkboxAll:function(e){var n=this;this.list.forEach((function(t){t.checked=e.value,t.childMenu.forEach((function(t){t.checked=e.value,e.value&&!n.checkList.some((function(e){return e===t.id}))&&n.checkList.push(t.id)}))})),e.value||(this.checkList=[]),this.$forceUpdate()},showOrHide:function(e){!0===e.hidden?e.hidden=!1:e.hidden=!0,this.$forceUpdate()},checkboxChange:function(e){var n=this,t=this.list.filter((function(n){return n.name===e.name}))[0].childMenu;e.value?t.forEach((function(e){e.checked=!0,n.checkList.some((function(n){return n===e.id}))||n.checkList.push(e.id)})):t.forEach((function(e){e.checked=!1,n.checkList.splice(n.checkList.indexOf(e.id),1)}));var i=this.list.filter((function(e){return 1==e.checked}));this.checkedAll=i.length==this.list.length,this.$forceUpdate()},checkJurisdiction:function(e,n){e.checked?(e.checked=!1,this.checkList.splice(this.checkList.indexOf(e.id),1)):(e.checked=!0,this.checkList.some((function(e){return e===n.id}))||this.checkList.push(e.id)),0===n.childMenu.filter((function(e){return!0===e.checked})).length?n.checked=!1:n.checked=!0,this.checkedAll=this.num===this.checkList.length,this.$forceUpdate()},onSubmit:function(){var e=this;e.$refs.uForm.validate((function(n){if(n)if(e.checkList.length>0){var t={ids:e.checkList.join(),roleName:e.form.roleName,roleDescription:"无",roleType:4,zoneId:e.zoneId};e.id>0?(t.id=e.id,e.$api("employeeManagement.updateDepartment",t,!1).then((function(n){200==n.code&&e.$refs.uToast.show({title:n.msg})}))):e.$api("employeeManagement.addDepartment",t,!1).then((function(n){200==n.code&&(e.$refs.uToast.show({title:n.msg}),e.$Router.push({path:"/pages/home/employeeManagement/index"}))})).catch((function(n){e.$refs.uToast.show({title:"添加失败",type:"error"})}))}else e.$refs.uToast.show({title:"请选择权限",type:"error"});else console.log("验证失败")}))}}};n.default=t}).call(this,t("543d")["default"])},"46ba":function(e,n,t){"use strict";t.r(n);var i=t("371f"),c=t.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);n["default"]=c.a},"47a6":function(e,n,t){"use strict";t.d(n,"b",(function(){return c})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return i}));var i={uNavbar:function(){return t.e("uview-ui/components/u-navbar/u-navbar").then(t.bind(null,"4a31"))},uGap:function(){return t.e("uview-ui/components/u-gap/u-gap").then(t.bind(null,"4c8c"))},uForm:function(){return t.e("uview-ui/components/u-form/u-form").then(t.bind(null,"6e49"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"df5a"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-input/u-input")]).then(t.bind(null,"8151"))},uCheckboxGroup:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(t.bind(null,"5c38"))},uCheckbox:function(){return t.e("uview-ui/components/u-checkbox/u-checkbox").then(t.bind(null,"94da"))},uIcon:function(){return t.e("uview-ui/components/u-icon/u-icon").then(t.bind(null,"fefa"))},uButton:function(){return t.e("uview-ui/components/u-button/u-button").then(t.bind(null,"cfbe"))},uToast:function(){return t.e("uview-ui/components/u-toast/u-toast").then(t.bind(null,"4663"))}},c=function(){var e=this,n=e.$createElement,t=(e._self._c,e.__map(e.list,(function(n,t){var i=e.__get_orig(n),c=n.childMenu.filter((function(e){return 1==e.checked}));return{$orig:i,g0:c}})));e.$mp.data=Object.assign({},{$root:{l0:t}})},o=[]},"5b8e":function(e,n,t){"use strict";t.r(n);var i=t("47a6"),c=t("46ba");for(var o in c)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return c[e]}))}(o);t("dab0");var u=t("f0c5"),r=Object(u["a"])(c["default"],i["b"],i["c"],!1,null,"7b88b336",null,!1,i["a"],void 0);n["default"]=r.exports},dab0:function(e,n,t){"use strict";var i=t("e852"),c=t.n(i);c.a},e852:function(e,n,t){},ed3e:function(e,n,t){"use strict";(function(e){var n=t("4ea4");t("0fcb"),t("5c17");n(t("66fd"));var i=n(t("5b8e"));wx.__webpack_require_UNI_MP_PLUGIN__=t,e(i.default)}).call(this,t("543d")["createPage"])}},[["ed3e","common/runtime","common/vendor"]]]);